import{j as e,J as $,r as t,c as p,q as C,f as y,g as j,W as Q,X as B,Y as V,$ as P,D as W,B as N,k as q,aB as J,h as v,P as I,M as b,T as R,as as U,E as M,t as E,m as L,n as D,N as G,F as K,G as X,aI as Y,aJ as z,K as H,aE as O,a5 as Z,w as _}from"./index-BHeNFVCX.js";import{L as F}from"./Lists-BsRADjrd.js";function T({action:s,label:r}){return e.jsxs("div",{className:"px-5",children:[e.jsxs("span",{children:[s,": "]}),e.jsx($,{label:r})]})}const ee=({userObj:s})=>{const[r,g]=t.useState([]);t.useState();const o=p(a=>a.languages.value),i=C(y(j,"violations")),u=a=>{const n=a.id,m=q(j,`violations/${n}`);J(m);const l=[];r.map((c,d)=>{c.id!==n&&l.push(c),d+1===r.length&&g(l)}),alert("지웠습니다")};return t.useEffect(()=>{(async()=>{const n=[];(await v(i)).forEach(l=>{if(l.data().userUid===s.uid){const c=l.data(),d={id:l.id,...c};n.push(d)}g(n)})})()},[]),console.log(r),e.jsx("div",{className:"p-5",children:r.length!==0?r.map((a,n)=>e.jsx("div",{children:e.jsx(Q,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(B,{value:n.toString(),children:[e.jsx(V,{children:a.messageTitle}),e.jsxs(P,{children:[e.jsx("div",{children:a.message}),a!=null&&a.violationUser?e.jsxs("div",{children:[e.jsx("div",{className:"pt-5",children:o==="ko"?"신고 등록 유저":"Report registered user"}),e.jsx(F,{elements:[a.violationUser],multiple:!0,userSearch:!0,ranking:!1,handleUser:m=>console.log(m)})]}):e.jsx(W,{variant:"inset"}),e.jsx("div",{className:"flex pt-3 justify-center",children:e.jsx(N,{variant:"outlined",onClick:()=>u(a),children:o==="ko"?"지우기":"Delete"})})]})]})})})):e.jsx("div",{children:o==="ko"?"신고하기 내역이 없습니다.":"No report"})})},se={ko:"신고하기 내역",en:"Report list"},te=({userObj:s})=>{const[r,g]=t.useState([]);t.useState();const o=p(a=>a.languages.value),i=o==="ko"||o==="en"?o:"ko",u=C(y(j,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await v(u)).forEach(l=>{if(l.data().userUid===s.uid){const c=l.data(),d={id:l.id,...c};n.push(d)}g(n)})})()},[]),console.log(r),e.jsx("div",{className:"flex justify-center pt-5",children:se[i]})},ae={ko:"신고하기 내역",en:"Report list"},ne=({userObj:s})=>{const[r,g]=t.useState([]);t.useState();const o=p(a=>a.languages.value),i=o==="ko"||o==="en"?o:"ko",u=C(y(j,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await v(u)).forEach(l=>{if(l.data().userUid===s.uid){const c=l.data(),d={id:l.id,...c};n.push(d)}g(n)})})()},[]),console.log(r),e.jsx(N,{variant:"outlined",form:"auth",children:ae[i]})},ce=({userObj:s})=>{const[r,g]=t.useState([]);t.useState(),p(i=>i.languages.value);const o=C(y(j,"violations"));return t.useEffect(()=>{(async()=>{const u=[];(await v(o)).forEach(n=>{if(n.data().userUid===s.uid){const m=n.data(),l={id:n.id,...m};u.push(l)}g(u)})})()},[]),e.jsx(e.Fragment,{children:e.jsx(I,{trigger:e.jsx(ne,{}),title:e.jsx(te,{userObj:s}),content:e.jsx(ee,{userObj:s})})})};function oe({violationUser:s,changeViolationUser:r}){const[g,o]=t.useState([]),[i,u]=t.useState([]),[a,n]=t.useState(""),m=p(c=>c.languages.value),l=c=>{const{target:{value:d}}=c;n(d)};return t.useEffect(()=>{(async()=>{const d=C(y(j,"members"),M("points","desc")),x=(await v(d)).docs.map((f,h)=>{var S;return E(L(D,`${(S=f.data())==null?void 0:S.uid}`)).then(w=>{u([...i,{url:w,index:h}])}).catch(w=>{console.log(w)}),{...f.data()}});o(x)})()},[]),b(),e.jsxs("div",{className:`flex flex-col p-5 ${!a&&"h-[60vh]"}`,children:[e.jsx(R,{label:m==="ko"?"유저 이름":"User name",onChange:l}),a&&e.jsx("div",{className:"flex flex-col",children:e.jsx(U,{children:e.jsx(F,{elements:g,multiple:!0,userSearch:a,ranking:!1,handleUser:c=>r(c)})})})]})}function re({violationUser:s,changeViolationUser:r}){const[g,o]=t.useState([]),[i,u]=t.useState([]);return t.useState(""),p(a=>a.languages.value),t.useEffect(()=>{(async()=>{const n=C(y(j,"members"),M("points","desc")),l=(await v(n)).docs.map((c,d)=>{var k;return E(L(D,`${(k=c.data())==null?void 0:k.uid}`)).then(x=>{u([...i,{url:x,index:d}])}).catch(x=>{console.log(x)}),{...c.data()}});o(l)})()},[]),b(),e.jsx("div",{children:"유저 검색"})}function ie({violationUser:s,changeViolationUser:r}){const[g,o]=t.useState([]),[i,u]=t.useState([]),[a,n]=t.useState(""),m=p(d=>d.languages.value);t.useEffect(()=>{(async()=>{const k=C(y(j,"members"),M("points","desc")),f=(await v(k)).docs.map((h,S)=>{var w;return E(L(D,`${(w=h.data())==null?void 0:w.uid}`)).then(A=>{u([...i,{url:A,index:S}])}).catch(A=>{console.log(A)}),{...h.data()}});o(f)})()},[]);const{color:l,colorTwo:c}=b();return e.jsx("div",{className:"w-full",onClick:()=>n(""),children:s?e.jsx(G,{sx:{width:"100%",bgcolor:l},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex flex-col justify-center",children:m==="ko"?"신고 유저:":"Reporting User"}),e.jsx("div",{className:"px-5",children:e.jsxs(K,{className:`bg-${((s==null?void 0:s.profileColor)||[]).indexOf("#")===-1?s==null?void 0:s.profileColor:"profile-blue"}`,children:[e.jsx(X,{src:s==null?void 0:s.profileImageUrl}),e.jsx(Y,{className:"text-xl border-none",children:s==null?void 0:s.displayName[0]})]})}),e.jsx("div",{className:"flex flex-col justify-center",children:s.displayName})]})}):e.jsx("div",{className:"flex justify-center w-screen",children:e.jsx(N,{sx:{width:"50%",bgcolor:c,":hover":{bgcolor:c}},variant:"outlined",form:"auth",children:m==="ko"?"신고 등록 유저":"Register reporting user"})})})}function le({violationUser:s,changeViolationUser:r}){const[g,o]=t.useState([]),[i,u]=t.useState([]);t.useState("");const a=p(n=>n.languages.value);return t.useEffect(()=>{(async()=>{const m=C(y(j,"members"),M("points","desc")),c=(await v(m)).docs.map((d,k)=>{var x;return E(L(D,`${(x=d.data())==null?void 0:x.uid}`)).then(f=>{u([...i,{url:f,index:k}])}).catch(f=>{console.log(f)}),{...d.data()}});o(c)})()},[]),b(),e.jsxs(e.Fragment,{children:[e.jsx(I,{trigger:e.jsx(ie,{violationUser:s}),title:e.jsx(re,{}),content:e.jsx(oe,{changeViolationUser:r})}),s&&e.jsx(N,{sx:{width:"25%"},variant:"outlined",onClick:()=>r(null),children:a==="ko"?"신고 등록 취소":"Cancel reporting"})]})}const de={ko:"신고하기 제목",en:"Report Title"},ge={ko:"신고하기 내용",en:"Report Content"};function ue({userObj:s,user:r}){const[g,o]=t.useState(""),[i,u]=t.useState(""),[a,n]=t.useState(null),[m,l]=t.useState(!0),c=p(h=>h.languages.value),d=c==="ko"||c==="en"?c:"ko";t.useEffect(()=>{r&&m&&(n(r),l(!1))},[r]);const k=async()=>{try{await z(y(j,"violations"),{userUid:s.uid,userName:s.displayName,messageTitle:g,message:i,violationUser:a}),alert("등록되었습니다"),o(""),u("")}catch(h){console.log(h)}},x=h=>{const{target:{value:S}}=h;u(S)},f=h=>{const{target:{value:S}}=h;o(S)};return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"auth",children:[e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(R,{label:de[d],multiline:!0,value:g,onChange:f,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(R,{label:ge[d],multiline:!0,rows:5,value:i,onChange:x,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex pt-3 px-5 gap-1",children:e.jsx(le,{violationUser:a,changeViolationUser:h=>n(h)})}),e.jsxs("div",{className:"flex justify-center pt-2.5",children:[e.jsx(ce,{userObj:s}),g&&i?e.jsx(N,{variant:"outlined",form:"auth",onClick:k,children:c==="ko"?"전송":"send"}):e.jsx(N,{variant:"outlined",form:"auth",disabled:!0,children:c==="ko"?"전송":"send"})]})]})})}const me={ko:"신고하기",en:"Report"},he={ko:"발신",en:"Sending"},xe={ko:"수신",en:"Receiving"},fe={ko:"담당자",en:"supervisor"};function ke({userObj:s}){const r=H(),{state:g}=O(),o=p(u=>u.languages.value),i=o==="ko"||o==="en"?o:"ko";return t.useEffect(()=>{r(Z(5))}),e.jsxs("div",{children:[e.jsx(_,{title:me[i]}),e.jsx(T,{action:he[i],label:s.displayName}),e.jsx(T,{action:xe[i],label:fe[i]}),e.jsx(ue,{userObj:s,user:g==null?void 0:g.user})]})}export{ke as default};
