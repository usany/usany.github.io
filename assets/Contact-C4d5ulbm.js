import{j as e,K as Q,r as t,c as k,q as S,f as y,g as p,_ as B,$ as V,a0 as O,a3 as P,D as q,B as w,k as K,aE as U,h as C,P as I,N as b,T as R,av as W,E as M,t as E,m as L,n as D,O as G,F as H,G as _,I as z,aK as J,L as X,aH as Y,a8 as Z,w as ee}from"./index-D1FhjqjU.js";import{L as T}from"./Lists-BBS-FsSR.js";function F({action:s,label:i}){return e.jsxs("div",{className:"px-5",children:[e.jsxs("span",{children:[s,": "]}),e.jsx(Q,{label:i})]})}const se=({userObj:s})=>{const[i,d]=t.useState([]);t.useState();const c=k(a=>a.languages.value),o=S(y(p,"violations")),u=a=>{const n=a.id,m=K(p,`violations/${n}`);U(m);const r=[];i.map((l,g)=>{l.id!==n&&r.push(l),g+1===i.length&&d(r)}),alert("지웠습니다")};return t.useEffect(()=>{(async()=>{const n=[];(await C(o)).forEach(r=>{if(r.data().userUid===s.uid){const l=r.data(),g={id:r.id,...l};n.push(g)}d(n)})})()},[]),console.log(i),e.jsx("div",{className:"p-5",children:i.length!==0?i.map((a,n)=>e.jsx("div",{children:e.jsx(B,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(V,{value:n.toString(),children:[e.jsx(O,{children:a.messageTitle}),e.jsxs(P,{children:[e.jsx("div",{children:a.message}),a!=null&&a.violationUser?e.jsxs("div",{children:[e.jsx("div",{className:"pt-5",children:c==="ko"?"신고 등록 유저":"Report registered user"}),e.jsx(T,{elements:[a.violationUser],multiple:!0,userSearch:!0,ranking:!1,handleUser:m=>console.log(m)})]}):e.jsx(q,{variant:"inset"}),e.jsx("div",{className:"flex pt-3 justify-center",children:e.jsx(w,{variant:"outlined",onClick:()=>u(a),children:c==="ko"?"지우기":"Delete"})})]})]})})})):e.jsx("div",{children:c==="ko"?"신고하기 내역이 없습니다.":"No report"})})},te={ko:"신고하기 내역",en:"Report list"},ae=({userObj:s})=>{const[i,d]=t.useState([]);t.useState();const c=k(a=>a.languages.value),o=c==="ko"||c==="en"?c:"ko",u=S(y(p,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await C(u)).forEach(r=>{if(r.data().userUid===s.uid){const l=r.data(),g={id:r.id,...l};n.push(g)}d(n)})})()},[]),console.log(i),e.jsx("div",{className:"flex justify-center pt-5",children:te[o]})},ne={ko:"신고하기 내역",en:"Report list"},ce=({userObj:s})=>{const[i,d]=t.useState([]);t.useState();const c=k(a=>a.languages.value),o=c==="ko"||c==="en"?c:"ko",u=S(y(p,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await C(u)).forEach(r=>{if(r.data().userUid===s.uid){const l=r.data(),g={id:r.id,...l};n.push(g)}d(n)})})()},[]),console.log(i),e.jsx(w,{variant:"outlined",form:"auth",children:ne[o]})},oe=({userObj:s})=>{const[i,d]=t.useState([]);t.useState(),k(o=>o.languages.value);const c=S(y(p,"violations"));return t.useEffect(()=>{(async()=>{const u=[];(await C(c)).forEach(n=>{if(n.data().userUid===s.uid){const m=n.data(),r={id:n.id,...m};u.push(r)}d(u)})})()},[]),e.jsx(e.Fragment,{children:e.jsx(I,{trigger:e.jsx(ce,{}),title:e.jsx(ae,{userObj:s}),content:e.jsx(se,{userObj:s})})})};function re({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]),[a,n]=t.useState(""),m=k(l=>l.languages.value),r=l=>{const{target:{value:g}}=l;n(g)};return t.useEffect(()=>{(async()=>{const g=S(y(p,"members"),M("points","desc")),x=(await C(g)).docs.map((j,N)=>{var v;return E(L(D,`${(v=j.data())==null?void 0:v.uid}`)).then(h=>{u([...o,{url:h,index:N}])}).catch(h=>{console.log(h)}),{...j.data()}});c(x)})()},[]),b(),e.jsxs("div",{className:`flex flex-col p-5 ${!a&&"h-[60vh]"}`,children:[e.jsx(R,{label:m==="ko"?"유저 이름":"User name",onChange:r}),a&&e.jsx("div",{className:"flex flex-col",children:e.jsx(W,{children:e.jsx(T,{elements:d,multiple:!0,userSearch:a,ranking:!1,handleUser:l=>i(l)})})})]})}function ie({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]);return t.useState(""),k(a=>a.languages.value),t.useEffect(()=>{(async()=>{const n=S(y(p,"members"),M("points","desc")),r=(await C(n)).docs.map((l,g)=>{var f;return E(L(D,`${(f=l.data())==null?void 0:f.uid}`)).then(x=>{u([...o,{url:x,index:g}])}).catch(x=>{console.log(x)}),{...l.data()}});c(r)})()},[]),b(),e.jsx("div",{children:"유저 검색"})}function le({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]),[a,n]=t.useState(""),m=k(l=>l.languages.value);t.useEffect(()=>{(async()=>{const g=S(y(p,"members"),M("points","desc")),x=(await C(g)).docs.map((j,N)=>{var v;return E(L(D,`${(v=j.data())==null?void 0:v.uid}`)).then(h=>{u([...o,{url:h,index:N}])}).catch(h=>{console.log(h)}),{...j.data()}});c(x)})()},[]);const{color:r}=b();return e.jsx("div",{className:"w-full",onClick:()=>n(""),children:s?e.jsx(G,{sx:{width:"100%",bgcolor:r},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex flex-col justify-center",children:m==="ko"?"신고 유저:":"Reporting User"}),e.jsx("div",{className:"px-5",children:e.jsxs(H,{className:`bg-${((s==null?void 0:s.profileColor)||[]).indexOf("#")===-1?s==null?void 0:s.profileColor:"profile-blue"}`,children:[e.jsx(_,{src:s==null?void 0:s.profileImageUrl}),e.jsx(z,{className:"text-xl border-none",children:s==null?void 0:s.displayName[0]})]})}),e.jsx("div",{className:"flex flex-col justify-center",children:s.displayName})]})}):e.jsx(w,{sx:{width:"100%"},variant:"outlined",form:"auth",children:m==="ko"?"신고 등록 유저":"Register reporting user"})})}function de({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]);t.useState("");const a=k(n=>n.languages.value);return t.useEffect(()=>{(async()=>{const m=S(y(p,"members"),M("points","desc")),l=(await C(m)).docs.map((g,f)=>{var x;return E(L(D,`${(x=g.data())==null?void 0:x.uid}`)).then(j=>{u([...o,{url:j,index:f}])}).catch(j=>{console.log(j)}),{...g.data()}});c(l)})()},[]),b(),e.jsxs(e.Fragment,{children:[e.jsx(I,{trigger:e.jsx(le,{violationUser:s}),title:e.jsx(ie,{}),content:e.jsx(re,{changeViolationUser:i})}),s&&e.jsx(w,{sx:{width:"25%"},variant:"outlined",onClick:()=>i(null),children:a==="ko"?"신고 등록 취소":"Cancel reporting"})]})}const ue={ko:"신고하기 제목",en:"Report Title"},ge={ko:"신고하기 내용",en:"Report Content"};function me({userObj:s,user:i}){const[d,c]=t.useState(""),[o,u]=t.useState(""),[a,n]=t.useState(!1),[m,r]=t.useState(null),[l,g]=t.useState(!0),f=k(h=>h.languages.value),x=f==="ko"||f==="en"?f:"ko";t.useEffect(()=>{i&&l&&(r(i),g(!1))},[i]),t.useEffect(()=>{n(!!(d&&o))},[d,o]);const j=async()=>{try{await J(y(p,"violations"),{userUid:s.uid,userName:s.displayName,messageTitle:d,message:o,violationUser:m}),alert("등록되었습니다"),c(""),u("")}catch(h){console.log(h)}},N=h=>{const{target:{name:$,value:A}}=h;u(A)},v=h=>{const{target:{name:$,value:A}}=h;c(A)};return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"auth",children:[e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(R,{label:ue[x],multiline:!0,value:d,onChange:v,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(R,{label:ge[x],multiline:!0,rows:5,value:o,onChange:N,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex pt-3 px-5 gap-1",children:e.jsx(de,{violationUser:m,changeViolationUser:h=>r(h)})}),e.jsxs("div",{className:"flex justify-center pt-2.5",children:[e.jsx(oe,{userObj:s}),a?e.jsx(w,{variant:"outlined",form:"auth",onClick:j,children:f==="ko"?"전송":"send"}):e.jsx(w,{variant:"outlined",form:"auth",disabled:!0,children:f==="ko"?"전송":"send"})]})]})})}const he={ko:"신고하기",en:"Report"},xe={ko:"발신",en:"Sending"},fe={ko:"수신",en:"Receiving"},je={ko:"담당자",en:"supervisor"};function ye({userObj:s}){const i=X(),{state:d}=Y(),c=k(u=>u.languages.value),o=c==="ko"||c==="en"?c:"ko";return t.useEffect(()=>{i(Z(5))}),e.jsxs("div",{children:[e.jsx(ee,{title:he[o]}),e.jsx(F,{action:xe[o],label:s.displayName}),e.jsx(F,{action:fe[o],label:je[o]}),e.jsx(me,{userObj:s,user:d==null?void 0:d.user})]})}export{ye as default};
