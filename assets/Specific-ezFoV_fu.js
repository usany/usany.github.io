import{aZ as _,aW as D,r as n,S as P,ag as M,a7 as x,a3 as T,a2 as W,X as o,W as g,j as e,aB as m,aT as q}from"./index-Df_Wku-e.js";import{g as L,C as R,h as d,i as v,j as y,k as U,B as N}from"./HorizontalRule-gyaeD4R9.js";import{P as X}from"./PageTitle-WBoG3sS4.js";import{a as Z,C as h}from"./Card-Beqlv6ha.js";import{B as b}from"./Button-CwoYlKT7.js";import"./webSocket-BpFYzTQr.js";function V({userObj:l}){const{state:i}=_(),k=D(),[s,C]=n.useState(i.msgObj),[j,w]=n.useState(null),[f,S]=n.useState(null),[r,$]=n.useState(!1),A=P();n.useEffect(()=>{A(M(5))},[]),n.useEffect(()=>{x(T(W(o,"num")),a=>{a.docs.map(t=>{t.id===i.msgObj.id&&C({id:t.id,...t.data()})}),a.docs.map(t=>t.id).indexOf(i.msgObj.id)===-1&&$(!0)})},[]),n.useEffect(()=>{x(g(o,`members/${s.creatorId}`),a=>{var t;const c=(t=a.data())==null?void 0:t.points;w(c)})},[]),n.useEffect(()=>{s.connectedId!==null&&x(g(o,`members/${s.connectedId}`),a=>{var t;const c=(t=a.data())==null?void 0:t.points;S(c)})});const I=()=>{k(-1)},u=["lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightsteelblue","lightyellow"];let p;const B=Array.from(Array(26)).map((a,c)=>c+65).map(a=>String.fromCharCode(a)),E=Array.from({length:10},(a,c)=>`${c}`),O=B.concat(E);return p=u[O.indexOf(String(s.id[0]).toUpperCase())%u.length],e.jsxs("div",{children:[e.jsx(X,{title:"카드 내용"}),e.jsxs(Z,{sx:{boxShadow:`1.9px 1.9px 1.9px 1.9px ${p}`},children:[e.jsx(L,{sx:{height:140},image:"src/assets/pwa-512x512.png"}),e.jsxs(R,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[s.text.choose===1&&e.jsx(h,{label:`${s.item} 빌리기`}),s.text.choose===2&&e.jsx(h,{label:`${s.item} 빌려주기`}),s.creatorId===((l==null?void 0:l.uid)||null)&&e.jsx(h,{label:"내가 작성함"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex",children:[s.text.count," ",s.text.counter," ",s.text.counting,"에서"]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[s.text.clock.year,".",s.text.clock.month,".",i.msgObj.text.clock.day," ",i.msgObj.text.clock.hour,":",i.msgObj.text.clock.minute,"에 대여"]}),e.jsxs("div",{children:[s.text.clock.year,".",s.text.clock.month,".",i.msgObj.text.clock.day," ",i.msgObj.text.clocker.hour,":",i.msgObj.text.clocker.minute,"에 반납"]})]})]})]}),e.jsx(m,{}),e.jsxs("div",{className:"pt-3",children:[s.text.choose===1&&e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:"flex flex-col px-5 pt-5",children:[e.jsx("div",{children:"빌리는 분"}),e.jsx("div",{children:s.displayName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[s.point," 포인트 지급"]}),e.jsxs("div",{className:"flex justify-start",children:[e.jsx(d,{}),e.jsx(v,{}),e.jsx(d,{}),e.jsx(v,{})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(y,{}),e.jsx(d,{}),e.jsx(y,{}),e.jsx(d,{})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{})})]}),e.jsxs("div",{className:"flex flex-col px-5 pt-5",children:[e.jsx("div",{children:"빌려주는 분"}),e.jsx("div",{children:s.connectedName||"아직 없음"})]})]}),s.text.choose===2&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["빌려주는 분: ",s.displayName]}),e.jsxs("div",{children:["지급 포인트: ",s.point]}),e.jsxs("div",{children:["빌리는 분: ",s.connectedName||"아직 없음"]})]}),e.jsx(m,{})]}),e.jsxs("div",{className:"flex pt-5",children:["진행 단계: ",s.round]}),e.jsx(U,{msgObj:s}),e.jsx(m,{}),e.jsxs("div",{className:"flex justify-center pt-5",children:[r===!1&&l!==null&&e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{msgObj:s,isOwner:s.creatorId===l.uid,uid:l.uid,displayName:l.displayName,userObj:l,num:j,points:f})}),r===!1&&l===null&&e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{msgObj:s,isOwner:!1,uid:null,displayName:null,userObj:l,num:j,points:f})}),r===!0&&e.jsx("div",{className:"flex justify-center",children:e.jsx(b,{variant:"outlined",disabled:!0,children:"지워졌습니다"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(b,{variant:"outlined",onClick:I,children:"뒤로 가기"})})]})]})]})]})}export{V as default};
