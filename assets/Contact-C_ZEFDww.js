import{j as e,r,a1 as y,a0 as v,V as x,U as C,a$ as N,a4 as T,aP as b,a5 as w,am as D}from"./index-6XYg9rPA.js";import{P as M}from"./PageTitle-B1fGLEOH.js";import{C as k}from"./Chip-Dl423VY4.js";import{D as A,j as F,k as S}from"./drawer-DpxBLpFZ.js";import{A as E,a as B,b as I,c as P}from"./accordion-DRYa7-JN.js";import{B as u}from"./Button--dlOmdpj.js";import{T as j}from"./TextField-DibbhR0s.js";function p({action:t,label:s}){return e.jsxs("div",{className:"px-5",children:[e.jsxs("span",{children:[t,": "]}),e.jsx(k,{label:s})]})}const U=({userObj:t})=>{const[s,d]=r.useState([]),l=y(v(x,"violations")),m=a=>{console.log(a);const n=C(x,`violations/${a.id}`);N(n),alert("지웠습니다")};return r.useEffect(()=>{(async()=>{const n=[];(await T(l)).forEach(c=>{if(c.data().userUid===t.uid){const g=c.data().messageTitle,i=c.data().message,o={id:c.id,messageTitle:g,message:i};n.push(o)}d(n)})})()},[]),e.jsx(e.Fragment,{children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsx(u,{variant:"outlined",form:"auth",children:"신고하기 내역"})}),e.jsxs(S,{className:"bg-light-3 dark:bg-dark-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-light-2 dark:bg-dark-2 h-2 w-[100px] rounded-full bg-muted",children:" "})}),e.jsx("div",{className:"flex justify-center pt-5",children:"신고하기 내역"}),e.jsx("div",{className:"p-5",children:s.length!==0?s.map((a,n)=>e.jsx("div",{children:e.jsx(E,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(B,{value:n.toString(),children:[e.jsx(I,{children:a.messageTitle}),e.jsxs(P,{children:[e.jsx("div",{children:a.message}),e.jsx(u,{variant:"outlined",onClick:()=>m(a),children:"지우기"})]})]})})})):e.jsx("div",{children:"신고하기 내역이 없습니다."})})]})]})})};function W({userObj:t}){const[s,d]=r.useState(""),[l,m]=r.useState(""),[a,n]=r.useState(!1);r.useEffect(()=>{n(!!(s&&l))},[s,l]);const h=async()=>{try{await b(v(x,"violations"),{userUid:t.uid,userName:t.displayName,messageTitle:s,message:l}),alert("등록되었습니다"),d(""),m("")}catch(i){console.log(i)}},c=i=>{const{target:{name:f,value:o}}=i;m(o)},g=i=>{const{target:{name:f,value:o}}=i;d(o)};return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"auth",children:[e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(j,{label:"신고하기 제목",multiline:!0,value:s,onChange:g,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(j,{label:"신고하기 내용",multiline:!0,rows:5,value:l,onChange:c,variant:"outlined",fullWidth:!0})}),e.jsxs("div",{className:"flex justify-center pt-2.5",children:[e.jsx(U,{userObj:t}),a?e.jsx(u,{variant:"outlined",form:"auth",onClick:h,children:"전송"}):e.jsx(u,{variant:"outlined",form:"auth",disabled:!0,children:"전송"})]})]})})}function H({userObj:t}){const s=w();return r.useEffect(()=>{s(D(5))}),e.jsxs("div",{children:[e.jsx(M,{title:"신고하기"}),e.jsx(p,{action:"발신",label:t.displayName}),e.jsx(p,{action:"수신",label:"담당자"}),e.jsx(W,{userObj:t})]})}export{H as default};
