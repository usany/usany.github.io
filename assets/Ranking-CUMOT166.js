import{j as s,aN as p,O as b,aE as k,r,a3 as I,a4 as w,$ as S,a0 as L,Z as U,aL as C,V as E,W as R,X as B,S as D}from"./index-eG1w-DuV.js";import{P as T}from"./PageTitle-B2s80Y_7.js";import{d as $}from"./Comment-C90khmfA.js";import{I as A}from"./IconButton-Dl1YI7f3.js";import{T as P}from"./TextField-CjaivQGC.js";function u({elements:x,multiple:e,userSearch:i}){return s.jsxs("div",{children:[!i&&s.jsxs("div",{className:"flex justify-between w-screen",children:[s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"flex flex-col justify-center px-5",children:[e?"유저":"내","  랭킹"]}),s.jsxs("div",{children:[s.jsxs("div",{children:[e?"유저":"내"," 이름"]}),s.jsx("div",{children:"포인트"})]})]}),s.jsx("div",{className:"flex flex-col justify-center px-5",children:"프로필"})]}),s.jsx("div",{className:"bg-light-3 dark:bg-dark-3",children:x.map((a,d)=>{let t=!0;if(i)for(let l=0;l<i.length;l++)(a==null?void 0:a.displayName[l])!==i[l]&&(t=!1);if(t)return s.jsxs("div",{className:`flex flex-col overflow-hidden ranking-${d+1}`,children:[s.jsxs("div",{className:"flex justify-between w-screen p-3",children:[s.jsxs("div",{className:"flex",children:[e?s.jsx("div",{className:"flex flex-col justify-center px-5",children:d+1}):s.jsx("div",{className:"flex flex-col justify-center px-5",children:a.rank}),(a==null?void 0:a.profileImageUrl)&&s.jsx(p,{alt:a.displayName,sx:{bgcolor:a.profileColor||"#2196f3"},src:(a==null?void 0:a.profileImageUrl)||"./src",variant:"rounded"}),!(a!=null&&a.profileImageUrl)&&s.jsx(p,{alt:a.displayName,sx:{bgcolor:a.profileColor||"#2196f3"},src:"./src",variant:"rounded"}),s.jsxs("div",{className:"flex flex-col overflow-hidden px-3",children:[s.jsx("div",{className:"overflow-hidden",children:a.displayName}),s.jsx("div",{className:"overflow-hidden",children:a.points})]})]}),s.jsx(A,{"aria-label":"comment",children:s.jsx(b,{to:"/profile",state:{element:a},children:s.jsx($,{})})})]}),s.jsx(k,{variant:"inset"})]},d)})})]})}function Z({userObj:x}){const[e,i]=r.useState([]),[a,d]=r.useState([]),[t,l]=r.useState(""),[v,g]=r.useState([]),[q,m]=r.useState(null),N=I(),y=f=>{const{target:{value:c}}=f;l(c)};return r.useEffect(()=>{w(S(U(D,"members"),L("points","desc")),f=>{const c=f.docs.map((n,o)=>{var h;return E(R(B,`${(h=n.data())==null?void 0:h.uid}`)).then(j=>{g([...v,{url:j,index:o}])}).catch(j=>{console.log(j)}),{...n.data()}});i(c),c.map((n,o)=>{n.uid===x.uid&&(c[o].rank=o+1,d([c[o]]),m(o))})})},[]),r.useEffect(()=>{N(C(5))}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx(T,{title:"유저 랭킹"}),s.jsx("div",{className:"px-5 flex flex-col",children:s.jsx(P,{label:"유저 이름",onChange:y})}),t?s.jsx(u,{elements:e,multiple:!0,userSearch:t}):s.jsxs("div",{children:[s.jsx(u,{elements:a,multiple:!1,userSearch:null}),s.jsx(u,{elements:e,multiple:!0,userSearch:null})]})]})}export{Z as default};
