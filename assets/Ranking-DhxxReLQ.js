import{c as L,M as T,j as e,T as A,r as n,q as w,aW as y,R as B,S as v,g as E,h as x,i as R,m as H,z as M,I as q,a7 as F,x as I,aX as Q}from"./index-BIGI5Aym.js";import{L as p}from"./Lists-CG0EYKj_.js";import"./ban-lRGp54qH.js";function z({changeUserSearch:a}){const o=L(c=>c.languages.value),s=c=>{const{target:{value:l}}=c;a(l)},{colorOne:i,colorTwo:r}=T();return e.jsx("div",{className:"px-5 flex justify-center",children:e.jsx(A,{sx:{width:"1000px",bgcolor:r,borderRadius:"5px"},label:o==="ko"?"유저 이름":"User name",onChange:s})})}function P({userObj:a,userSearch:o}){const[s,i]=n.useState([]),[r,c]=n.useState([]),[l,k]=n.useState(null),[u,f]=n.useState(!1);n.useState([]),n.useState(!1);const b=20;n.useEffect(()=>{const U=async()=>{const h=w(E(x,"members"),v("points","desc"),B(b),y(l||"")),d=await R(h),g=d.docs.map((t,m)=>{if(s.indexOf(t)===-1)return m+1===d.docs.length&&k(t),{...t.data()}});if(i([...s,...g]),r.length===0){const t=H(x,`members/${a.uid}`),N=(await M(t)).data();g.map((C,j)=>{C.uid===a.uid&&(g[j].rank=j+1)}),c([N])}f(!1)},D=async()=>{const h=w(E(x,"members"),v("points","desc"),y(l||"")),d=await R(h),g=d.docs.map((t,m)=>{if(console.log(s.indexOf(t)),s.indexOf(t)===-1)return m+1===d.docs.length&&k(t),{...t.data()}});i([...s,...g]),f(!1)};(u||s.length===0)&&U(),o&&(D(),console.log(o))},[u,o]);const S=()=>{if(document.documentElement.offsetHeight-(window.innerHeight+Math.round(document.documentElement.scrollTop))>250||u){console.log(document.documentElement.offsetHeight);return}else console.log("scroll"),f(!0)};return n.useEffect(()=>(window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)),[u]),e.jsx("div",{className:"flex truncate justify-center",children:o?e.jsx("div",{children:e.jsx(p,{userObj:a,elements:s,multiple:!0,userSearch:o,ranking:!0,handleUser:null})}):e.jsxs("div",{className:"w-[1000px]",children:[e.jsx(p,{userObj:a,elements:r,multiple:!1,userSearch:null,ranking:!0,handleUser:null}),e.jsx(p,{userObj:a,elements:s,multiple:!0,userSearch:null,ranking:!0,handleUser:null}),u&&e.jsx("div",{className:"flex justify-center text-2xl bg-light-2 dark:bg-dark-2 rounded",children:"로딩"})]})})}function G({userObj:a}){const[o,s]=n.useState(""),i=L(c=>c.languages.value),r=q();return n.useEffect(()=>{r(F(5))}),e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:e.jsx(Q,{}),title:i==="ko"?"유저 랭킹":"User Ranking"}),e.jsx(z,{changeUserSearch:c=>s(c)}),e.jsx(P,{userObj:a,userSearch:o})]})}export{G as default};
