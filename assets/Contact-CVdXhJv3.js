import{j as e,K as $,r as t,c as p,q as v,f as y,g as j,W as Q,X as B,Y as V,$ as P,D as W,B as N,k as q,aB as U,h as C,P as I,N as b,T as R,as as G,F as M,t as L,m as D,n as E,O as H,G as J,H as K,aI as O,aJ as X,L as Y,aE as z,a4 as Z,w as _}from"./index-ex5VpNxA.js";import{L as F}from"./Lists-6wI7T_Nv.js";function T({action:s,label:r}){return e.jsxs("div",{className:"px-5",children:[e.jsxs("span",{children:[s,": "]}),e.jsx($,{label:r})]})}const ee=({userObj:s})=>{const[r,u]=t.useState([]);t.useState();const o=p(a=>a.languages.value),i=v(y(j,"violations")),g=a=>{const n=a.id,h=q(j,`violations/${n}`);U(h);const l=[];r.map((c,d)=>{c.id!==n&&l.push(c),d+1===r.length&&u(l)}),alert("지웠습니다")};return t.useEffect(()=>{(async()=>{const n=[];(await C(i)).forEach(l=>{if(l.data().userUid===s.uid){const c=l.data(),d={id:l.id,...c};n.push(d)}u(n)})})()},[]),console.log(r),e.jsx("div",{className:"p-5",children:r.length!==0?r.map((a,n)=>e.jsx("div",{children:e.jsx(Q,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(B,{value:n.toString(),children:[e.jsx(V,{children:a.messageTitle}),e.jsxs(P,{children:[e.jsx("div",{children:a.message}),a!=null&&a.violationUser?e.jsxs("div",{children:[e.jsx("div",{className:"pt-5",children:o==="ko"?"신고 등록 유저":"Report registered user"}),e.jsx(F,{elements:[a.violationUser],multiple:!0,userSearch:!0,ranking:!1,handleUser:h=>console.log(h)})]}):e.jsx(W,{variant:"inset"}),e.jsx("div",{className:"flex pt-3 justify-center",children:e.jsx(N,{variant:"outlined",onClick:()=>g(a),children:o==="ko"?"지우기":"Delete"})})]})]})})})):e.jsx("div",{children:o==="ko"?"신고하기 내역이 없습니다.":"No report"})})},se={ko:"신고하기 내역",en:"Report list"},te=({userObj:s})=>{const[r,u]=t.useState([]);t.useState();const o=p(a=>a.languages.value),i=o==="ko"||o==="en"?o:"ko",g=v(y(j,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await C(g)).forEach(l=>{if(l.data().userUid===s.uid){const c=l.data(),d={id:l.id,...c};n.push(d)}u(n)})})()},[]),console.log(r),e.jsx("div",{className:"flex justify-center pt-5",children:se[i]})},ae={ko:"신고하기 내역",en:"Report list"},ne=({userObj:s})=>{const[r,u]=t.useState([]);t.useState();const o=p(a=>a.languages.value),i=o==="ko"||o==="en"?o:"ko",g=v(y(j,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await C(g)).forEach(l=>{if(l.data().userUid===s.uid){const c=l.data(),d={id:l.id,...c};n.push(d)}u(n)})})()},[]),console.log(r),e.jsx(N,{variant:"outlined",form:"auth",children:ae[i]})},ce=({userObj:s})=>{const[r,u]=t.useState([]);t.useState(),p(i=>i.languages.value);const o=v(y(j,"violations"));return t.useEffect(()=>{(async()=>{const g=[];(await C(o)).forEach(n=>{if(n.data().userUid===s.uid){const h=n.data(),l={id:n.id,...h};g.push(l)}u(g)})})()},[]),e.jsx(e.Fragment,{children:e.jsx(I,{trigger:e.jsx(ne,{}),title:e.jsx(te,{userObj:s}),content:e.jsx(ee,{userObj:s})})})};function oe({violationUser:s,changeViolationUser:r}){const[u,o]=t.useState([]),[i,g]=t.useState([]),[a,n]=t.useState(""),h=p(c=>c.languages.value),l=c=>{const{target:{value:d}}=c;n(d)};return t.useEffect(()=>{(async()=>{const d=v(y(j,"members"),M("points","desc")),x=(await C(d)).docs.map((f,m)=>{var S;return L(D(E,`${(S=f.data())==null?void 0:S.uid}`)).then(w=>{g([...i,{url:w,index:m}])}).catch(w=>{console.log(w)}),{...f.data()}});o(x)})()},[]),b(),e.jsxs("div",{className:`flex flex-col p-5 ${!a&&"h-[60vh]"}`,children:[e.jsx(R,{label:h==="ko"?"유저 이름":"User name",onChange:l}),a&&e.jsx("div",{className:"flex flex-col",children:e.jsx(G,{children:e.jsx(F,{elements:u,multiple:!0,userSearch:a,ranking:!1,handleUser:c=>r(c)})})})]})}function re({violationUser:s,changeViolationUser:r}){const[u,o]=t.useState([]),[i,g]=t.useState([]);return t.useState(""),p(a=>a.languages.value),t.useEffect(()=>{(async()=>{const n=v(y(j,"members"),M("points","desc")),l=(await C(n)).docs.map((c,d)=>{var k;return L(D(E,`${(k=c.data())==null?void 0:k.uid}`)).then(x=>{g([...i,{url:x,index:d}])}).catch(x=>{console.log(x)}),{...c.data()}});o(l)})()},[]),b(),e.jsx("div",{children:"유저 검색"})}function ie({violationUser:s,changeViolationUser:r}){const[u,o]=t.useState([]),[i,g]=t.useState([]),[a,n]=t.useState(""),h=p(d=>d.languages.value);t.useEffect(()=>{(async()=>{const k=v(y(j,"members"),M("points","desc")),f=(await C(k)).docs.map((m,S)=>{var w;return L(D(E,`${(w=m.data())==null?void 0:w.uid}`)).then(A=>{g([...i,{url:A,index:S}])}).catch(A=>{console.log(A)}),{...m.data()}});o(f)})()},[]);const{color:l,colorTwo:c}=b();return e.jsx("div",{onClick:()=>n(""),children:s?e.jsx(H,{sx:{width:"100%",bgcolor:l},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex flex-col justify-center",children:h==="ko"?"신고 유저:":"Reporting User"}),e.jsx("div",{className:"px-5",children:e.jsxs(J,{className:`bg-${((s==null?void 0:s.profileColor)||[]).indexOf("#")===-1?s==null?void 0:s.profileColor:"profile-blue"}`,children:[e.jsx(K,{src:s==null?void 0:s.profileImageUrl}),e.jsx(O,{className:"text-xl border-none",children:s==null?void 0:s.displayName[0]})]})}),e.jsx("div",{className:"flex flex-col justify-center",children:s.displayName})]})}):e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{sx:{width:"50%",bgcolor:c,":hover":{bgcolor:c}},variant:"outlined",form:"auth",children:h==="ko"?"신고 등록 유저":"Register reporting user"})})})}function le({violationUser:s,changeViolationUser:r}){const[u,o]=t.useState([]),[i,g]=t.useState([]);t.useState("");const a=p(n=>n.languages.value);return t.useEffect(()=>{(async()=>{const h=v(y(j,"members"),M("points","desc")),c=(await C(h)).docs.map((d,k)=>{var x;return L(D(E,`${(x=d.data())==null?void 0:x.uid}`)).then(f=>{g([...i,{url:f,index:k}])}).catch(f=>{console.log(f)}),{...d.data()}});o(c)})()},[]),b(),e.jsxs("div",{className:"w-full",children:[e.jsx(I,{trigger:e.jsx(ie,{violationUser:s}),title:e.jsx(re,{}),content:e.jsx(oe,{changeViolationUser:r})}),s&&e.jsx(N,{sx:{width:"25%"},variant:"outlined",onClick:()=>r(null),children:a==="ko"?"신고 등록 취소":"Cancel reporting"})]})}const de={ko:"신고하기 제목",en:"Report Title"},ue={ko:"신고하기 내용",en:"Report Content"};function ge({userObj:s,user:r}){const[u,o]=t.useState(""),[i,g]=t.useState(""),[a,n]=t.useState(null),[h,l]=t.useState(!0),c=p(m=>m.languages.value),d=c==="ko"||c==="en"?c:"ko";t.useEffect(()=>{r&&h&&(n(r),l(!1))},[r]);const k=async()=>{try{await X(y(j,"violations"),{userUid:s.uid,userName:s.displayName,messageTitle:u,message:i,violationUser:a}),alert("등록되었습니다"),o(""),g("")}catch(m){console.log(m)}},x=m=>{const{target:{value:S}}=m;g(S)},f=m=>{const{target:{value:S}}=m;o(S)};return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"auth",children:[e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(R,{label:de[d],multiline:!0,value:u,onChange:f,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(R,{label:ue[d],multiline:!0,rows:5,value:i,onChange:x,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex pt-3 px-5 gap-1",children:e.jsx(le,{violationUser:a,changeViolationUser:m=>n(m)})}),e.jsxs("div",{className:"flex justify-center pt-2.5",children:[e.jsx(ce,{userObj:s}),u&&i?e.jsx(N,{variant:"outlined",form:"auth",onClick:k,children:c==="ko"?"전송":"send"}):e.jsx(N,{variant:"outlined",form:"auth",disabled:!0,children:c==="ko"?"전송":"send"})]})]})})}const he={ko:"신고하기",en:"Report"},me={ko:"발신",en:"Sending"},xe={ko:"수신",en:"Receiving"},fe={ko:"담당자",en:"supervisor"};function ke({userObj:s}){const r=Y(),{state:u}=z(),o=p(g=>g.languages.value),i=o==="ko"||o==="en"?o:"ko";return t.useEffect(()=>{r(Z(5))}),e.jsxs("div",{children:[e.jsx(_,{title:he[i]}),e.jsx(T,{action:me[i],label:s.displayName}),e.jsx(T,{action:xe[i],label:fe[i]}),e.jsx(ge,{userObj:s,user:u==null?void 0:u.user})]})}export{ke as default};
