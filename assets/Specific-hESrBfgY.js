import{j as e,aM as m,aN as p,aY as B,a_ as O,r as c,a5 as U,aP as W,a6 as o,a1 as T,a0 as V,U as C,V as x,aI as u,aU as Y}from"./index-DFLENtAm.js";import{S as F,b as $,c as k,C as G,a as J,B as w}from"./Btn-H10KgyHQ.js";import{P as K}from"./PageTitle-Caqok-WC.js";import{C as Q}from"./Card-BpCtyhGz.js";import{C as f}from"./Chip-u8zB01sU.js";import{B as I}from"./Button-CmaEIKBj.js";import"./DialogContent-BnRHI7Wb.js";import"./webSocket-BpFYzTQr.js";const X=["빌리기 요청","요청 진행 중","공유 진행 중","반납 확인 중","반납 완료"],Z=["빌려주기 요청","요청 진행 중","공유 진행 중","반납 확인 중","반납 완료"];function ee({msgObj:a}){return e.jsx("div",{children:e.jsxs(F,{activeStep:a.round-1,alternativeLabel:!0,children:[a.text.choose===1&&X.map(t=>e.jsx($,{children:e.jsx(k,{children:t})},t)),a.text.choose===2&&Z.map(t=>e.jsx($,{children:e.jsx(k,{children:t})},t))]})})}var v={},se=p;Object.defineProperty(v,"__esModule",{value:!0});var h=v.default=void 0,te=se(m()),ae=e;h=v.default=(0,te.default)((0,ae.jsx)("path",{d:"m15 5-1.41 1.41L18.17 11H2v2h16.17l-4.59 4.59L15 19l7-7z"}),"East");var g={},le=p;Object.defineProperty(g,"__esModule",{value:!0});var j=g.default=void 0,ie=le(m()),re=e;j=g.default=(0,ie.default)((0,re.jsx)("path",{d:"m9 19 1.41-1.41L5.83 13H22v-2H5.83l4.59-4.59L9 5l-7 7z"}),"West");var y={},ce=p;Object.defineProperty(y,"__esModule",{value:!0});var d=y.default=void 0,de=ce(m()),ne=e;d=y.default=(0,de.default)((0,ne.jsx)("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRule");function ge({userObj:a}){const{state:t}=B(),R=O(),[s,E]=c.useState(t.msgObj),[N,A]=c.useState(null),[S,D]=c.useState(null),[n,L]=c.useState(!1),M=U();c.useEffect(()=>{M(W(5))},[]),c.useEffect(()=>{o(T(V(x,"num")),i=>{i.docs.map(l=>{l.id===t.msgObj.id&&E({id:l.id,...l.data()})}),i.docs.map(l=>l.id).indexOf(t.msgObj.id)===-1&&L(!0)})},[]),c.useEffect(()=>{o(C(x,`members/${s.creatorId}`),i=>{var l;const r=(l=i.data())==null?void 0:l.points;A(r)})},[]),c.useEffect(()=>{s.connectedId!==null&&o(C(x,`members/${s.connectedId}`),i=>{var l;const r=(l=i.data())==null?void 0:l.points;D(r)})});const P=()=>{R(-1)},_=["lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightsteelblue","lightyellow"];let b;const q=Array.from(Array(26)).map((i,r)=>r+65).map(i=>String.fromCharCode(i)),H=Array.from({length:10},(i,r)=>`${r}`),z=q.concat(H);return b=_[z.indexOf(String(s.id[0]).toUpperCase())%_.length],e.jsxs("div",{className:"p-5",children:[e.jsx(K,{title:"카드 내용"}),e.jsxs(Q,{sx:{boxShadow:`1.9px 1.9px 1.9px 1.9px ${b}`},children:[e.jsx(G,{sx:{height:140},image:"src/assets/pwa-512x512.png"}),e.jsxs(J,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[s.text.choose===1&&e.jsx(f,{label:`${s.item} 빌리기`}),s.text.choose===2&&e.jsx(f,{label:`${s.item} 빌려주기`}),s.creatorId===((a==null?void 0:a.uid)||null)&&e.jsx(f,{label:"내가 작성함"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex",children:[s.text.count," ",s.text.counter," ",s.text.counting,"에서"]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[s.text.clock.year,".",s.text.clock.month,".",t.msgObj.text.clock.day," ",t.msgObj.text.clock.hour,":",t.msgObj.text.clock.minute,"에 대여"]}),e.jsxs("div",{children:[s.text.clock.year,".",s.text.clock.month,".",t.msgObj.text.clock.day," ",t.msgObj.text.clocker.hour,":",t.msgObj.text.clocker.minute,"에 반납"]})]})]})]}),e.jsx(u,{}),e.jsxs("div",{className:"pt-3",children:[s.text.choose===1&&e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:"flex flex-col px-5 pt-5",children:[e.jsx("div",{children:"빌리는 분"}),e.jsx("div",{children:s.displayName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[s.point," 포인트 지급"]}),e.jsxs("div",{className:"flex justify-start",children:[e.jsx(d,{}),e.jsx(h,{}),e.jsx(d,{}),e.jsx(h,{})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(j,{}),e.jsx(d,{}),e.jsx(j,{}),e.jsx(d,{})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Y,{})})]}),e.jsxs("div",{className:"flex flex-col px-5 pt-5",children:[e.jsx("div",{children:"빌려주는 분"}),e.jsx("div",{children:s.connectedName||"아직 없음"})]})]}),s.text.choose===2&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["빌려주는 분: ",s.displayName]}),e.jsxs("div",{children:["지급 포인트: ",s.point]}),e.jsxs("div",{children:["빌리는 분: ",s.connectedName||"아직 없음"]})]}),e.jsx(u,{})]}),e.jsxs("div",{className:"flex pt-5",children:["진행 단계: ",s.round]}),e.jsx(ee,{msgObj:s}),e.jsx(u,{}),e.jsxs("div",{className:"flex justify-center pt-5",children:[n===!1&&a!==null&&e.jsx("div",{className:"flex justify-center",children:e.jsx(w,{msgObj:s,isOwner:s.creatorId===a.uid,uid:a.uid,displayName:a.displayName,userObj:a,num:N,points:S})}),n===!1&&a===null&&e.jsx("div",{className:"flex justify-center",children:e.jsx(w,{msgObj:s,isOwner:!1,uid:null,displayName:null,userObj:a,num:N,points:S})}),n===!0&&e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{variant:"outlined",disabled:!0,children:"지워졌습니다"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{variant:"outlined",onClick:P,children:"뒤로 가기"})})]})]})]})]})}export{ge as default};
