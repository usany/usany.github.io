import{j as s,aN as p,O as b,aE as k,r as e,a0 as I,a1 as w,X as S,Y as L,W as U,aL as C,a2 as E,b0 as R,ai as B,aj as D,S as T}from"./index-DmmIGfxw.js";import{d as A}from"./Comment-S6YNMiF5.js";import{I as $}from"./IconButton-CtRcV0C9.js";import{T as q}from"./TextField-hezUy-KH.js";function h({elements:f,multiple:r,userSearch:i}){return s.jsxs("div",{children:[!i&&s.jsxs("div",{className:"flex justify-between w-screen",children:[s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"flex flex-col justify-center px-5",children:[r?"유저":"내","  랭킹"]}),s.jsxs("div",{children:[s.jsxs("div",{children:[r?"유저":"내"," 이름"]}),s.jsx("div",{children:"포인트"})]})]}),s.jsx("div",{className:"flex flex-col justify-center px-5",children:"프로필"})]}),s.jsx("div",{className:"bg-light-3 dark:bg-dark-3",children:f.map((a,d)=>{let t=!0;if(i)for(let l=0;l<i.length;l++)(a==null?void 0:a.displayName[l])!==i[l]&&(t=!1);if(t)return s.jsxs("div",{className:`flex flex-col overflow-hidden ranking-${d+1}`,children:[s.jsxs("div",{className:"flex justify-between w-screen p-3",children:[s.jsxs("div",{className:"flex",children:[r?s.jsx("div",{className:"flex flex-col justify-center px-5",children:d+1}):s.jsx("div",{className:"flex flex-col justify-center px-5",children:a.rank}),(a==null?void 0:a.profileImageUrl)&&s.jsx(p,{alt:a.displayName,sx:{bgcolor:a.profileColor||"#2196f3"},src:(a==null?void 0:a.profileImageUrl)||"./src",variant:"rounded"}),!(a!=null&&a.profileImageUrl)&&s.jsx(p,{alt:a.displayName,sx:{bgcolor:a.profileColor||"#2196f3"},src:"./src",variant:"rounded"}),s.jsxs("div",{className:"flex flex-col overflow-hidden px-3",children:[s.jsx("div",{className:"overflow-hidden",children:a.displayName}),s.jsx("div",{className:"overflow-hidden",children:a.points})]})]}),s.jsx($,{"aria-label":"comment",children:s.jsx(b,{to:"/profile",state:{element:a},children:s.jsx(A,{})})})]}),s.jsx(k,{variant:"inset"})]},d)})})]})}function Y({userObj:f}){const[r,i]=e.useState([]),[a,d]=e.useState([]),[t,l]=e.useState(""),[v,g]=e.useState([]),[F,m]=e.useState(null),N=I(),y=j=>{const{target:{value:c}}=j;l(c)};return e.useEffect(()=>{w(S(U(T,"members"),L("points","desc")),j=>{const c=j.docs.map((n,o)=>{var u;return R(B(D,`${(u=n.data())==null?void 0:u.uid}`)).then(x=>{console.log(x),g([...v,{url:x,index:o}])}).catch(x=>{console.log(x)}),{...n.data()}});i(c),c.map((n,o)=>{n.uid===f.uid&&(c[o].rank=o+1,d([c[o]]),m(o))})})},[]),e.useEffect(()=>{N(C(5))}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx(E,{title:"유저 랭킹"}),s.jsx("div",{className:"px-5 flex flex-col",children:s.jsx(q,{label:"유저 이름",onChange:y})}),t?s.jsx(h,{elements:r,multiple:!0,userSearch:t}):s.jsxs("div",{children:[s.jsx(h,{elements:a,multiple:!1,userSearch:null}),s.jsx(h,{elements:r,multiple:!0,userSearch:null})]})]})}export{Y as default};
