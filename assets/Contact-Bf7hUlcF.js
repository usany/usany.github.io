import{j as e,Q as A,r as i,d as h,q as y,n as v,p,A as E,e as R,f as F,g as L,aO as I,B as j,x as B,N as Q,t as C,P as M,T as w,a3 as U,D as P,y as $,z as V,_ as b,a0 as q,R as W,U as _,b4 as z,a_ as G,G as H,af as J,H as K,b5 as X}from"./index-DsKin5yT.js";import{L as T}from"./Lists-BuSQ3RJF.js";import{B as Y}from"./ban-7iz03qkt.js";function D({action:s,label:t}){return e.jsxs("div",{className:"flex gap-5 pt-1 px-5",children:[e.jsxs("div",{className:"flex items-center",children:[s,":"]}),e.jsx(A,{label:t})]})}const Z=({userObj:s})=>{const[t,a]=i.useState([]);i.useState();const n=h(o=>o.languages.value),l=y(v(p,"violations")),g=o=>{const c=o.id,u=B(p,`violations/${c}`);Q(u);const r=[];t.map((d,m)=>{d.id!==c&&r.push(d),m+1===t.length&&a(r)}),alert("지웠습니다")};return i.useEffect(()=>{(async()=>{const c=[];(await C(l)).forEach(r=>{if(r.data().userUid===s.uid){const d=r.data(),m={id:r.id,...d};c.push(m)}a(c)})})()},[]),console.log(t),e.jsx("div",{className:"p-5",children:t.length!==0?t.map((o,c)=>e.jsx("div",{children:e.jsx(E,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(R,{value:c.toString(),children:[e.jsx(F,{children:o.messageTitle}),e.jsxs(L,{children:[e.jsx("div",{children:o.message}),o!=null&&o.violationUser?e.jsxs("div",{children:[e.jsx("div",{className:"pt-5",children:n==="ko"?"신고 등록 유저":"Report registered user"}),e.jsx(T,{elements:[o.violationUser],multiple:!0,userSearch:!0,ranking:!1,handleUser:u=>console.log(u)})]}):e.jsx(I,{variant:"inset"}),e.jsx("div",{className:"flex pt-3 justify-center",children:e.jsx(j,{variant:"outlined",onClick:()=>g(o),children:n==="ko"?"지우기":"Delete"})})]})]})})})):e.jsx("div",{children:n==="ko"?"신고하기 내역이 없습니다.":"No report"})})},O={ko:"신고하기 내역",en:"Report list"},ee=({userObj:s})=>{const[t,a]=i.useState([]);i.useState();const n=h(o=>o.languages.value),l=n==="ko"||n==="en"?n:"ko",g=y(v(p,"violations"));return i.useEffect(()=>{(async()=>{const c=[];(await C(g)).forEach(r=>{if(r.data().userUid===s.uid){const d=r.data(),m={id:r.id,...d};c.push(m)}a(c)})})()},[]),console.log(t),e.jsx("div",{className:"flex justify-center pt-5",children:O[l]})},se={ko:"신고하기 내역",en:"Report list"},te=({userObj:s})=>{const[t,a]=i.useState([]);i.useState();const n=h(o=>o.languages.value),l=n==="ko"||n==="en"?n:"ko",g=y(v(p,"violations"));return i.useEffect(()=>{(async()=>{const c=[];(await C(g)).forEach(r=>{if(r.data().userUid===s.uid){const d=r.data(),m={id:r.id,...d};c.push(m)}a(c)})})()},[]),console.log(t),e.jsx(j,{variant:"outlined",form:"auth",children:se[l]})},ne=({userObj:s})=>{const[t,a]=i.useState([]);i.useState(),h(l=>l.languages.value);const n=y(v(p,"violations"));return i.useEffect(()=>{(async()=>{const g=[];(await C(n)).forEach(c=>{if(c.data().userUid===s.uid){const u=c.data(),r={id:c.id,...u};g.push(r)}a(g)})})()},[]),e.jsx(e.Fragment,{children:e.jsx(M,{trigger:e.jsx(te,{}),title:e.jsx(ee,{userObj:s}),content:e.jsx(Z,{userObj:s})})})};function ae({changeViolationUser:s}){const[t,a]=i.useState([]),[n,l]=i.useState([]),[g,o]=i.useState(""),c=h(r=>r.languages.value),u=r=>{const{target:{value:d}}=r;o(d)};return i.useEffect(()=>{(async()=>{const d=y(v(p,"members"),U("points","desc")),S=(await C(d)).docs.map((k,N)=>{var x;return P($(V,`${(x=k.data())==null?void 0:x.uid}`)).then(f=>{l([...n,{url:f,index:N}])}).catch(f=>{console.log(f)}),{...k.data()}});a(S)})()},[]),e.jsxs("div",{className:`flex flex-col p-5 ${!g&&"h-[60vh]"}`,children:[e.jsx(w,{label:c==="ko"?"유저 이름":"User name",onChange:u}),g&&e.jsx("div",{className:"flex justify-center",children:e.jsx(T,{userObj:null,elements:t,multiple:!0,userSearch:g,ranking:!1,handleUser:s})})]})}function oe(){return h(s=>s.languages.value),e.jsx("div",{children:"유저 검색"})}const ce=({violationUser:s,color:t})=>{const a=s!=null&&s.profileImage?s.profileImageUrl:s==null?void 0:s.defaultProfile,n=h(l=>l.languages.value);return e.jsx(q,{sx:{width:"100%",bgcolor:t},children:e.jsxs("div",{className:"flex p-3 gap-3",children:[e.jsx("div",{className:"flex items-center",children:n==="ko"?"신고 유저:":"Reporting User"}),e.jsx(W,{children:e.jsx(_,{src:a})}),e.jsx("div",{className:"flex items-center",children:s==null?void 0:s.displayName})]})})};function re({violationUser:s}){const t=h(n=>n.languages.value),{colorTwo:a}=b();return e.jsx(e.Fragment,{children:s?e.jsx(ce,{violationUser:s,color:a}):e.jsx("div",{className:"flex justify-center",children:e.jsx(j,{sx:{bgcolor:a,":hover":{bgcolor:a}},variant:"outlined",form:"auth",children:t==="ko"?"신고 등록 유저":"Register reporting user"})})})}function ie({violationUser:s,changeViolationUser:t}){return e.jsxs("div",{className:"flex justify-center w-full gap-5",children:[e.jsx(M,{trigger:e.jsx(re,{violationUser:s}),title:e.jsx(oe,{}),content:e.jsx(ae,{changeViolationUser:t})}),s&&e.jsx(j,{variant:"outlined",onClick:()=>t(null),children:e.jsx(Y,{})})]})}const le={ko:"신고하기 제목",en:"Report Title"},de={ko:"신고하기 내용",en:"Report Content"};function ge({userObj:s,user:t}){const[a,n]=i.useState(""),[l,g]=i.useState(""),[o,c]=i.useState(null),[u,r]=i.useState(!0),d=h(x=>x.languages.value),m=d==="ko"||d==="en"?d:"ko";i.useEffect(()=>{t&&u&&(c(t),r(!1))},[t]);const S=async()=>{try{await z(v(p,"violations"),{userUid:(s==null?void 0:s.uid)||"비로그인",userName:(s==null?void 0:s.displayName)||"비로그인",messageTitle:a,message:l,violationUser:o}),alert("등록되었습니다"),n(""),g(""),c(null)}catch(x){console.log(x)}},k=x=>{const{target:{value:f}}=x;g(f)},N=x=>{const{target:{value:f}}=x;n(f)};return e.jsxs("form",{id:"auth",children:[e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(w,{name:"title",label:le[m],multiline:!0,value:a,onChange:N,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(w,{name:"content",label:de[m],multiline:!0,rows:5,value:l,onChange:k,variant:"outlined",fullWidth:!0})}),s&&e.jsx("div",{className:"flex pt-3 px-5 gap-1",children:e.jsx(ie,{violationUser:o,changeViolationUser:x=>c(x)})}),e.jsxs("div",{className:"flex justify-center pt-2.5",children:[s&&e.jsx(ne,{userObj:s}),a&&l?e.jsx(j,{variant:"outlined",form:"auth",onClick:S,children:d==="ko"?"전송":"send"}):e.jsx(j,{variant:"outlined",form:"auth",disabled:!0,children:d==="ko"?"전송":"send"})]})]})}const ue={ko:"신고하기",en:"Report"},xe={ko:"발신",en:"Sending"},me={ko:"수신",en:"Receiving"},he={ko:"담당자",en:"supervisor"};function ve({userObj:s}){const{state:t}=G(),a=h(g=>g.languages.value),n=a==="ko"||a==="en"?a:"ko",l=H();return i.useEffect(()=>{l(J(5))}),e.jsxs(e.Fragment,{children:[e.jsx(K,{icon:e.jsx(X,{}),title:ue[n]}),s&&e.jsx(D,{action:xe[n],label:s==null?void 0:s.displayName}),e.jsx(D,{action:me[n],label:he[n]}),e.jsx(ge,{userObj:s,user:t==null?void 0:t.user})]})}export{ve as default};
