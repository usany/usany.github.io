import{b2 as Ee,u as oe,c as O,O as ue,aV as ie,r as p,j as e,b3 as Re,b4 as ve,P as me,X as we,b5 as ye,aX as Fe,v as $,m as I,I as R,$ as K,a_ as ke,l as te,C as W,b6 as Ve,N as fe,Y as Ce,B as ze,b1 as Be,b7 as Ne,q as ce,Z as re,_ as de,n as ge,aY as Ie,s as Ae,S as He,Q as be,D as Ye,b8 as _e,aa as Le}from"./index-CWcz6VXI.js";/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=Ee("AlarmClockCheck",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}],["path",{d:"m9 13 2 2 4-4",key:"6343dt"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Ee("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),je={ko:"메세지를 작성해 주세요",en:"Input message"},Se={ko:"전송",en:"send"};function Ke({handleCalls:u,chattingUser:l,userObj:c,multiple:a,messages:i,handleMessages:b,messagesList:v,handleMessagesList:j}){const F=oe(d=>d.profileColor.value),M=oe(d=>d.piazzaForm.value),r=O(d=>d.profile.value),V=ue(),{state:Y}=ie(),C=Y==null?void 0:Y.conversation,U=O(d=>d.languages.value),Z=U==="ko"||U==="en"?U:"ko",[_,ee]=p.useState(!1),w=async d=>{var D;d.preventDefault();const N=i,S=c.uid,t=c.displayName,o=Date.now(),s=new Date().toString(),g=r==null?void 0:r.profileImageUrl,n=r==null?void 0:r.defaultProfile,h=r==null?void 0:r.profileImage;let f,m,x;l&&(f=$(I,`members/${l.uid}`),m=await R(f),x=(D=m.data())==null?void 0:D.messagingToken);const z=r.profileImage?r.profileImageUrl:r.defaultProfile;console.log(r);const k={msg:N,userUid:S,id:t,messageClockNumber:o,messageClock:s,conversation:C,conversationUid:l==null?void 0:l.uid,conversationName:l==null?void 0:l.displayName,profileImage:h,defaultProfile:n,profileImageUrl:g,profileUrl:z,sendingToken:x};a?k&&N&&(K.emit("piazzaMessage",k),y()):N&&(v.length!==0?(K.emit("message",k),console.log("message")):(K.emit("messageNew",k),console.log("messageNew")),L(),ne()),b("")},E=d=>{b(d.target.value)},y=async()=>{try{const d=i,N=c.uid,S=c.displayName,t=new Date().toString(),o=Date.now(),s=r==null?void 0:r.profileImageUrl,g=r==null?void 0:r.defaultProfile,n=r==null?void 0:r.profileImage;d&&(await ke(te(I,"chats_group"),{userUid:N,userName:S,message:d,messageClock:t,messageClockNumber:o,profileImageUrl:s,defaultProfile:g,profileColor:F,piazzaChecked:[c.uid],profileImage:n}),j(h=>[...h,{msg:d,type:"me",userUid:c.uid,id:c.displayName,messageClock:t,conversation:null,profileColor:F,messageClockNumber:o,defaultProfile:g,profileImageUrl:s,profileImage:n||!1}]))}catch(d){console.log(d)}},L=async()=>{var N,S,t;const d=i;try{const o=c.uid,s=c.displayName,g=Date.now(),n=new Date().toString(),h=r.profileImage,f=l.profileImage,m=r.profileImageUrl,x=l.profileImageUrl,z=r.defaultProfile,k=l.defaultProfile;let D,P,B,G,A,T,q,H,X,Q;if(c.uid<l.uid?(D=c.uid,P=l.uid,B=c.displayName,G=l.displayName,A=m,T=x,q=z,H=k,X=r.profileImage,Q=l.profileImage):(D=l.uid,P=c.uid,B=l.displayName,G=c.displayName,A=x,T=m,q=k,H=z,X=l.profileImage,Q=r.profileImage),!A){const J=$(I,`members/${D}`);A=(N=(await R(J)).data())==null?void 0:N.profileImageUrl}if(!T){const J=$(I,`members/${P}`);T=(S=(await R(J)).data())==null?void 0:S.profileImageUrl}if(d){const J={userUid:o,userName:s,message:d,messageClock:n,messageClockNumber:g,userOne:D,userTwo:P,userOneDisplayName:B,userTwoDisplayName:G,userOneProfileUrl:A,userTwoProfileUrl:T,userOneDefaultProfile:q,userTwoDefaultProfile:H,userOneProfileImage:X,userTwoProfileImage:Q};await ke(te(I,`chats_${C}`),J);const se=$(I,`members/${o}`),he=(await R(se)).data().chattings||{},xe=$(I,`members/${l.uid}`),le=(await R(xe)).data().chattings||{},Te=((t=le[C])==null?void 0:t.messageCount)||0;he[C]=J,le[C]={...J,messageCount:Te+1},await W(se,{chattings:he}),await W(xe,{chattings:le}),j($e=>[...$e,{msg:d,type:"me",userUid:c.uid,id:c.displayName,messageClock:n,conversation:C,userName:s,messageClockNumber:g,userOne:D,userTwo:P,userOneDisplayName:B,userTwoDisplayName:G,userOneProfileUrl:A,userTwoProfileUrl:T,userOneDefaultProfile:q,userTwoDefaultProfile:H,userOneProfileImage:X,userTwoProfileImage:Q}])}}catch(o){console.log(o)}},ne=async()=>{try{const d=c.uid,N=l.uid,S=$(I,`members/${d}`),o=(await R(S)).data().conversation||[],s=$(I,`members/${N}`),n=(await R(s)).data().conversation||[];o.indexOf(C)===-1&&(await W(S,{conversation:[...o,C]}),V(Ve())),n.indexOf(C)===-1&&await W(s,{conversation:[...n,C]})}catch(d){console.log(d)}};p.useEffect(()=>{if(_){document.getElementById("mute"),document.getElementById("stream");const d=document.getElementById("videoInput");document.getElementById("myFace");let N;async function S(){try{const o={video:!0,audio:!0};N=await navigator.mediaDevices.getUserMedia(o),N.getVideoTracks().forEach(s=>s.enabled=!s.enabled),N.getAudioTracks().forEach(s=>s.enabled=!s.enabled),t()}catch(o){console.log(o)}}S();async function t(){try{const s=(await navigator.mediaDevices.enumerateDevices()).filter(g=>g.kind==="videoinput");s.forEach(g=>{const n=document.createElement("option");n.value=g.deviceId,n.innerText=g.label,d==null||d.appendChild(n)}),console.log(s)}catch(o){console.log(o)}}}});const ae=()=>{ee(!0),u()};return e.jsx(e.Fragment,{children:M?e.jsxs("form",{className:"fixed w-screen bottom-0 flex gap-px",onSubmit:w,children:[e.jsx("button",{onClick:()=>ae(),className:"px-1 rounded bg-light-2 dark:bg-dark-2",type:"submit",children:e.jsx(De,{})}),e.jsxs("select",{className:"w-10",children:[e.jsx("option",{children:"video"}),e.jsx("option",{children:"audio"})]}),e.jsxs(Re,{value:item,onChange:changeItem,children:[e.jsx(ve,{value:"우산",children:U==="ko"?"우산":"Usan"}),e.jsx(ve,{value:"양산",children:U==="ko"?"양산":"Yangsan"})]}),e.jsx("input",{className:"w-full p-3 rounded bg-light-1 dark:bg-dark-1",placeholder:je[Z],onChange:E,value:i,autoFocus:!0}),e.jsx("button",{className:"w-1/6 rounded bg-light-2 dark:bg-dark-2",type:"submit",children:Se[Z]})]}):e.jsxs("form",{className:"fixed w-screen bottom-[60px] flex gap-px",onSubmit:w,children:[C&&C!=="piazza"&&e.jsx(me,{trigger:e.jsx("button",{className:"px-1 h-full rounded bg-light-2 dark:bg-dark-2",type:"submit",children:e.jsx(De,{})}),title:e.jsx("div",{children:"전화 선택"}),content:e.jsxs("div",{className:"flex justify-center gap-5 p-5",children:[e.jsx(we,{className:"colorOne",sx:{height:"100%"},onClick:()=>ae(),children:e.jsx(ye,{children:e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsx(Fe,{}),e.jsx("div",{children:"화상 전화"})]})})}),e.jsx(we,{className:"colorOne",sx:{height:"100%"},children:e.jsx(ye,{children:e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsx(qe,{}),e.jsx("div",{children:"음성 전화"})]})})})]})}),e.jsx("input",{className:"w-full p-3 rounded bg-light-1 dark:bg-dark-1",placeholder:je[Z],onChange:E,value:i,autoFocus:!0}),e.jsx("button",{className:"w-1/6 rounded bg-light-2 dark:bg-dark-2",type:"submit",children:Se[Z]})]})})}const Ue=({initiateContinuing:u,multiple:l,handleMultiple:c,user:a,userObj:i,handleMessagesList:b,displayedName:v})=>{const[j,F]=p.useState(null),M=O(r=>r.languages.value);return p.useEffect(()=>{a&&((a==null?void 0:a.uid)<i.uid?F((a==null?void 0:a.uid[0])+(a==null?void 0:a.uid[1])+(a==null?void 0:a.uid[2])+(a==null?void 0:a.uid[3])+(a==null?void 0:a.uid[4])+(a==null?void 0:a.uid[5])+i.uid[0]+i.uid[1]+i.uid[2]+i.uid[3]+i.uid[4]+i.uid[5]):F(i.uid[0]+i.uid[1]+i.uid[2]+i.uid[3]+i.uid[4]+i.uid[5]+(a==null?void 0:a.uid[0])+(a==null?void 0:a.uid[1])+(a==null?void 0:a.uid[2])+(a==null?void 0:a.uid[3])+(a==null?void 0:a.uid[4])+(a==null?void 0:a.uid[5])))},[a]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col items-center pt-5",children:[e.jsx(fe,{element:a,uid:i.uid,profile:!0,profileColor:"",profileUrl:a==null?void 0:a.profileImageUrl,fallback:"",piazza:null}),e.jsx("div",{children:a==null?void 0:a.displayName}),(a==null?void 0:a.displayName)!==v&&e.jsx("div",{children:M==="ko"?e.jsxs("div",{children:["(",v,"에서 개명)"]}):e.jsxs("div",{children:["(Changed name from ",v,")"]})})]}),e.jsxs("div",{className:"flex justify-center p-5",children:[e.jsx(Ce,{to:`${location.pathname}?id=${j}`,state:{element:a},children:e.jsx(ze,{variant:"outlined",onClick:()=>{},children:M==="ko"?"프로필 확인":"Check Profile"})}),l&&i.uid!==(a==null?void 0:a.uid)&&e.jsx(Ce,{to:`${location.pathname}?id=${j}`,state:{conversation:j,displayName:a==null?void 0:a.displayName,userUid:i.uid,chattingUid:a==null?void 0:a.uid,multiple:!1,profileUrl:a==null?void 0:a.profileImageUrl},children:e.jsx(Be,{children:e.jsx(ze,{variant:"outlined",onClick:()=>{b([]),c(!1),u()},children:M==="ko"?"개인 대화":"Private messaging"})})})]})]})};function Pe({userObj:u,multiple:l,handleMultiple:c,messagesList:a,handleMessagesList:i}){const b=p.useRef(null),v=p.useRef(null),[j,F]=p.useState(null),[M,r]=p.useState(""),[V,Y]=p.useState(!1),[C,U]=p.useState(null),[Z,_]=p.useState(0),[ee,w]=p.useState("piazza"),{state:E}=ie(),y=(E==null?void 0:E.conversation)||"piazza";p.useEffect(()=>{ee!==y&&(i([]),U(null),_(0),w(y))},[y]);const L=O(t=>t.languages.value),ne=async({userUid:t,displayName:o})=>{const s=$(I,`members/${t}`),n=(await R(s)).data();F(n),r(o),console.log("practice")},ae=({userUid:t,displayName:o})=>{var s;(s=document.getElementById("drawer"))==null||s.click(),ne({userUid:t,displayName:o})},d=20;p.useEffect(()=>{if(!K)return;function t(o){const{msg:s,userUid:g,id:n,target:h,messageClock:f,messageClockNumber:m,profileImageUrl:x,defaultProfile:z,profileImage:k,conversation:D}=o;i(P=>[...P,{msg:s,type:h?"private":"other",userUid:g,id:n,messageClock:f,messageClockNumber:m,conversation:null,profileImageUrl:x,defaultProfile:z,profileImage:k}])}return K.on("sMessagePiazza",t),()=>{K.off("sMessagePiazza",t)}},[]),p.useEffect(()=>{if(!K)return;function t(o){const{msg:s,userUid:g,id:n,target:h,messageClock:f,messageClockNumber:m,conversation:x,profileImageUrl:z,defaultProfile:k,profileImage:D,piazzaData:P}=o;i(B=>[...B,{msg:s,type:h?"private":"other",userUid:g,id:n,messageClock:f,messageClockNumber:m,conversation:null,profileImageUrl:z,defaultProfile:k,profileImage:D,...P}])}return K.on(`sMessage${y}`,t),()=>{K.off(`sMessage${y}`,t)}},[]),p.useEffect(()=>{document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})},[]),p.useEffect(()=>{N(),(async()=>{if(l){const o=te(I,"chats_group"),s=ce(o,de("messageClockNumber","desc"),re(1));(await ge(s)).forEach(async n=>{const h=$(I,`chats_group/${n.id}`),m=(await R(h)).data(),x=m.piazzaChecked||[];x.indexOf(u.uid)===-1&&(x.splice(-1,u.uid,0),x.push(u.uid),await W(h,{...m,piazzaChecked:x}))})}else{const o=$(I,`members/${u.uid}`),g=(await R(o)).data().chattings;g[y]&&(g[y].messageCount=0),await W(o,{chattings:g})}})()},[a]);const N=()=>{var t;(t=b.current)==null||t.scrollIntoView()};p.useEffect(()=>{const t=async()=>{const s=[],g=te(I,"chats_group"),n=ce(g,de("messageClockNumber","desc"),re(d),Ie(C||"")),h=await ge(n);h.docs.length||_(h.docs.length),h.forEach(f=>{var T,q,H;s.length===h.docs.length-1&&(U(f),_(h.docs.length-1));const m=f.data().message,x=f.data().userUid,z=f.data().userName,k=f.data().messageClock,D=f.data().messageClockNumber,P=(T=f.data())==null?void 0:T.profileImageUrl,B=(q=f.data())==null?void 0:q.defaultProfile,G=(H=f.data())==null?void 0:H.profileImage,A=f.data();s.push({msg:m,userUid:x,id:z,messageClockNumber:D,messageClock:k,conversation:null,profileImageUrl:P,defaultProfile:B,profileImage:G||!1,...A})}),s.reverse(),i([...s,...a]),Y(!1)},o=async s=>{const g=te(I,`chats_${s}`),n=ce(g,de("messageClockNumber","desc"),re(d),Ie(C||"")),h=await ge(n),f=[];h.docs.length||_(h.docs.length),h.forEach((m,x)=>{var H,X,Q;f.length===h.docs.length-1&&(U(m),_(h.docs.length-1));const z=m.data().message,k=m.data().userUid,D=m.data().userName,P=m.data().messageClock,B=m.data().messageClockNumber||0,G=(H=m.data())==null?void 0:H.profileImageUrl,A=(X=m.data())==null?void 0:X.defaultProfile,T=(Q=m.data())==null?void 0:Q.profileImage,q=m.data();f.push({msg:z,userUid:k,id:D,messageClockNumber:B,messageClock:P,conversation:null,profileImageUrl:G,defaultProfile:A,profileImage:T||!1,...q})}),f.reverse(),i([...f,...a]),Y(!1)};y==="piazza"?(V||!a.length)&&t():(V||!a.length)&&o(y)},[V,y]);const S=()=>{v.current.scrollTop!==0||V||(console.log("scroll"),Y(!0))};return p.useEffect(()=>{var t;return(t=v.current)==null||t.addEventListener("scroll",S),()=>{var o;return(o=v.current)==null?void 0:o.removeEventListener("scroll",S)}},[V]),console.log(y),console.log(a),console.log(j),e.jsx(e.Fragment,{children:e.jsx("div",{ref:v,className:"p-1 border-t rounded-xl overflow-auto",children:e.jsxs("ul",{children:[V&&e.jsx("div",{className:"flex justify-center bg-light-2 dark:bg-dark-2 rounded",children:"로딩"}),a.map((t,o)=>{let s;y==="piazza"?s=t:t.userUid===t.userOne?s={userUid:t.userOne,id:t.userOneDisplayName,profileImage:t.userOneProfileImage||t.profileImage,defaultProfile:t.userOneDefaultProfile||t.defaultProfile,profileImageUrl:t.userOneProfileUrl||t.profileImageUrl}:s={userUid:t.userTwo,id:t.userTwoDisplayName,profileImage:t.userTwoProfileImage||t.profileImage,defaultProfile:t.userTwoDefaultProfile||t.defaultProfile,profileImageUrl:t.userTwoProfileUrl||t.profileImageUrl};let g;const n=new Date(t.messageClock);t.userUid===u.uid?g="text-right":g="text-left";let h,f;o>0&&(h=a[o-1].userUid),o<a.length-1&&a[o+1].userUid===u.uid&&(f=new Date(a[o+1].messageClock),n.getFullYear()===f.getFullYear()&&n.getMonth()===f.getMonth()&&n.getDate()===f.getDate()&&n.getHours()===f.getHours()&&(n.getMinutes(),f.getMinutes()));let m,x=n.getHours(),z=(n.getMonth()+1).toString(),k=n.getDate().toString();return x>=13?(m="오후",x!==12&&(x=x-12)):(m="오전",x===0&&(x=x+12)),n.getMonth()+1<10&&(z="0"+z),k.length===1&&(k="0"+k),e.jsxs("li",{ref:o===Z?b:null,className:g,children:[h!==t.userUid&&e.jsx("div",{children:e.jsx("div",{className:`flex justify-${t.userUid!==u.uid?"start":"end"}`,children:g==="text-left"?e.jsxs("div",{className:"flex gap-3",children:[e.jsx(me,{trigger:e.jsx(fe,{element:s,piazza:()=>ae({userUid:s.userUid,displayName:s.id}),profile:!1}),title:e.jsx(Ne,{}),content:e.jsx(Ue,{initiateContinuing:()=>U(null),multiple:l,handleMultiple:c,user:j,userObj:u,handleMessagesList:i,displayedName:M})}),e.jsx("div",{children:t.id})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{children:t.id}),e.jsx(me,{trigger:e.jsx(fe,{element:s,piazza:()=>ae({userUid:s.userUid,displayName:s.id}),profile:!1}),title:e.jsx(Ne,{}),content:e.jsx(Ue,{initiateContinuing:()=>U(null),multiple:l,handleMultiple:c,user:j,userObj:u,handleMessagesList:i,displayedName:M})})]})})}),t.userUid!==u.uid?e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"other rounded-tr-lg rounded-bl-lg rounded-br-lg p-1 bg-light-1 dark:bg-dark-1",children:t.msg}),e.jsxs("div",{children:[n.getFullYear(),"-",z,"-",k," ",L==="ko"&&m," ",x,":",n.getMinutes()<10&&"0",n.getMinutes(),L==="en"&&(m==="오전"?"am":"pm")]})]}):e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsxs("div",{children:[n.getFullYear(),"-",z,"-",k," ",L==="ko"&&m," ",x,":",n.getMinutes()<10&&"0",n.getMinutes(),L==="en"&&(m==="오전"?"am":"pm")]}),e.jsx("div",{className:"me rounded-tl-lg rounded-bl-lg rounded-br-lg p-1 bg-light-1 dark:bg-dark-1",children:t.msg})]})]},o)}),e.jsx("li",{ref:b})]})})})}function Ze({isKeyboardOpen:u,userObj:l,multiple:c,handleMultiple:a,messagesList:i,handleMessagesList:b}){return e.jsx(e.Fragment,{children:u?e.jsx("div",{className:"fixed bottom-[50px] w-screen h-full bg-light-3 dark:bg-dark-3 flex flex-col pt-[120px]",children:e.jsx(Pe,{userObj:l,multiple:c,handleMultiple:a,messagesList:i,handleMessagesList:b})}):e.jsx("div",{className:"fixed bottom-[110px] w-screen h-[60%] bg-light-3 dark:bg-dark-3 flex flex-col",children:e.jsx(Pe,{userObj:l,multiple:c,handleMultiple:a,messagesList:i,handleMessagesList:b})})})}const Ge=Ae(He)(({theme:u})=>({padding:8,"& .MuiSwitch-track":{borderRadius:22/2,"&::before, &::after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&::before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(u.palette.getContrastText(u.palette.primary.main))}" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>')`,left:12},"&::after":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(u.palette.getContrastText(u.palette.primary.main))}" d="M19,13H5V11H19V13Z" /></svg>')`,right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}));function Xe(){const u=O(i=>i.languages.value),l=oe(i=>i.piazzaSwitch.value),c=ue(),a=()=>{l==="true"?(window.localStorage.setItem("piazza","false"),c(be("false"))):(window.localStorage.setItem("piazza","true"),c(be("true")))};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm",children:u==="ko"?"단체 대화 알림 받기":"Receive Group Messaging notice"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Ge,{onClick:()=>a(),inputProps:{"aria-label":"ant design"},checked:l==="true"})})]})}const Me={ko:["단체 대화","개인 대화"],en:["Group Messaging","Messaging"]},Qe=({multiple:u,displayName:l})=>{const c=O(b=>b.languages.value),a=c==="ko"||c==="en"?c:"ko",{state:i}=ie();return e.jsxs("div",{className:"flex w-screen justify-between",children:[e.jsx(Ye,{icon:e.jsx(_e,{}),title:i.conversation==="piazza"?Me[a][0]:`${Me[a][1]} ${l}`}),u&&e.jsx("div",{className:"flex w-1/2 justify-end px-5 pt-5",children:e.jsx(Xe,{})})]})};function Je({userObj:u}){return e.jsx("div",{id:"myStream",children:e.jsx("video",{id:"myFace",width:"320",height:"240",controls:!0,autoPlay:!0})})}function ea({userObj:u}){const[l,c]=p.useState(""),[a,i]=p.useState([]),b=ue(),{state:v}=ie(),[j,F]=p.useState(!0),[M,r]=p.useState(!1),[V,Y]=p.useState(null),[C,U]=p.useState(!1),Z=()=>U(!0);p.useEffect(()=>{const w=async()=>{if(v.chattingUid){const E=$(I,`members/${v.chattingUid}`),y=await R(E);Y(y.data())}};v.multiple||w()},[v]);const _=oe(w=>w.piazzaForm.value);p.useEffect(()=>{var E;const w=()=>{var L;const y=window.screen.height-300>(((L=window.visualViewport)==null?void 0:L.height)||window.screen.height);M!==y&&r(y)};return window.addEventListener("resize",w),typeof visualViewport<"u"&&((E=window.visualViewport)==null||E.addEventListener("resize",w)),visualViewport==null||visualViewport.addEventListener("resize",w),typeof visualViewport<"u"&&(visualViewport==null||visualViewport.addEventListener("resize",w)),()=>{var y;typeof visualViewport<"u"&&((y=window.visualViewport)==null||y.removeEventListener("resize",w))}},[M]),p.useEffect(()=>{(v==null?void 0:v.multiple)!==void 0&&F(v==null?void 0:v.multiple)},[]),p.useEffect(()=>{b(Le(5))});const ee=v==null?void 0:v.displayName;return console.log(v),e.jsxs(e.Fragment,{children:[!M&&e.jsx(Qe,{multiple:j,displayName:ee}),e.jsx(Ze,{isKeyboardOpen:_,userObj:u,multiple:j,handleMultiple:w=>F(w),messagesList:a,handleMessagesList:w=>i(w)}),C&&e.jsx(Je,{}),e.jsx(Ke,{handleCalls:Z,chattingUser:V,userObj:u,multiple:j,messages:l,handleMessages:w=>c(w),messagesList:a,handleMessagesList:w=>i(w)})]})}export{ea as default};
