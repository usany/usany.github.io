import{j as e,aI as m,aJ as v,aZ as B,aW as O,r as d,a6 as W,aj as T,a7 as o,a2 as J,a1 as U,V as $,W as x,aD as u,aT as V}from"./index-pckL3LEg.js";import{C as Z,c as F,B as C}from"./Btn-EM3Jpp-q.js";import{S as G,a as k,b as w}from"./Stepper-CI8HeE3L.js";import{P as K}from"./PageTitle-Y5jH5pjC.js";import{C as Q,a as f}from"./Card-B7rfXBb5.js";import{B as I}from"./Button-CblxW786.js";import"./webSocket-BpFYzTQr.js";const X=["빌리기 요청","요청 진행 중","공유 진행 중","반납 확인 중","반납 완료"],Y=["빌려주기 요청","요청 진행 중","공유 진행 중","반납 확인 중","반납 완료"];function ee({msgObj:a}){return e.jsx("div",{children:e.jsxs(G,{activeStep:a.round-1,alternativeLabel:!0,children:[a.text.choose===1&&X.map(t=>e.jsx(k,{children:e.jsx(w,{children:t})},t)),a.text.choose===2&&Y.map(t=>e.jsx(k,{children:e.jsx(w,{children:t})},t))]})})}var p={},se=v;Object.defineProperty(p,"__esModule",{value:!0});var h=p.default=void 0,te=se(m()),ae=e;h=p.default=(0,te.default)((0,ae.jsx)("path",{d:"m15 5-1.41 1.41L18.17 11H2v2h16.17l-4.59 4.59L15 19l7-7z"}),"East");var g={},le=v;Object.defineProperty(g,"__esModule",{value:!0});var j=g.default=void 0,ie=le(m()),re=e;j=g.default=(0,ie.default)((0,re.jsx)("path",{d:"m9 19 1.41-1.41L5.83 13H22v-2H5.83l4.59-4.59L9 5l-7 7z"}),"West");var y={},de=v;Object.defineProperty(y,"__esModule",{value:!0});var n=y.default=void 0,ne=de(m()),ce=e;n=y.default=(0,ne.default)((0,ce.jsx)("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRule");function pe({userObj:a}){const{state:t}=B(),R=O(),[s,E]=d.useState(t.msgObj),[N,D]=d.useState(null),[S,A]=d.useState(null),[c,L]=d.useState(!1),q=W();d.useEffect(()=>{q(T(5))},[]),d.useEffect(()=>{o(J(U(x,"num")),i=>{i.docs.map(l=>{l.id===t.msgObj.id&&E({id:l.id,...l.data()})}),i.docs.map(l=>l.id).indexOf(t.msgObj.id)===-1&&L(!0)})},[]),d.useEffect(()=>{o($(x,`members/${s.creatorId}`),i=>{var l;const r=(l=i.data())==null?void 0:l.points;D(r)})},[]),d.useEffect(()=>{s.connectedId!==null&&o($(x,`members/${s.connectedId}`),i=>{var l;const r=(l=i.data())==null?void 0:l.points;A(r)})});const H=()=>{R(-1)},_=["lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightsteelblue","lightyellow"];let b;const M=Array.from(Array(26)).map((i,r)=>r+65).map(i=>String.fromCharCode(i)),P=Array.from({length:10},(i,r)=>`${r}`),z=M.concat(P);return b=_[z.indexOf(String(s.id[0]).toUpperCase())%_.length],e.jsxs("div",{children:[e.jsx(K,{title:"카드 내용"}),e.jsxs(Q,{sx:{boxShadow:`1.9px 1.9px 1.9px 1.9px ${b}`},children:[e.jsx(Z,{sx:{height:140},image:"src/assets/pwa-512x512.png"}),e.jsxs(F,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[s.text.choose===1&&e.jsx(f,{label:`${s.item} 빌리기`}),s.text.choose===2&&e.jsx(f,{label:`${s.item} 빌려주기`}),s.creatorId===((a==null?void 0:a.uid)||null)&&e.jsx(f,{label:"내가 작성함"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex",children:[s.text.count," ",s.text.counter," ",s.text.counting,"에서"]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[s.text.clock.year,".",s.text.clock.month,".",t.msgObj.text.clock.day," ",t.msgObj.text.clock.hour,":",t.msgObj.text.clock.minute,"에 대여"]}),e.jsxs("div",{children:[s.text.clock.year,".",s.text.clock.month,".",t.msgObj.text.clock.day," ",t.msgObj.text.clocker.hour,":",t.msgObj.text.clocker.minute,"에 반납"]})]})]})]}),e.jsx(u,{}),e.jsxs("div",{className:"pt-3",children:[s.text.choose===1&&e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:"flex flex-col px-5 pt-5",children:[e.jsx("div",{children:"빌리는 분"}),e.jsx("div",{children:s.displayName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[s.point," 포인트 지급"]}),e.jsxs("div",{className:"flex justify-start",children:[e.jsx(n,{}),e.jsx(h,{}),e.jsx(n,{}),e.jsx(h,{})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(j,{}),e.jsx(n,{}),e.jsx(j,{}),e.jsx(n,{})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(V,{})})]}),e.jsxs("div",{className:"flex flex-col px-5 pt-5",children:[e.jsx("div",{children:"빌려주는 분"}),e.jsx("div",{children:s.connectedName||"아직 없음"})]})]}),s.text.choose===2&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["빌려주는 분: ",s.displayName]}),e.jsxs("div",{children:["지급 포인트: ",s.point]}),e.jsxs("div",{children:["빌리는 분: ",s.connectedName||"아직 없음"]})]}),e.jsx(u,{})]}),e.jsxs("div",{className:"flex pt-5",children:["진행 단계: ",s.round]}),e.jsx(ee,{msgObj:s}),e.jsx(u,{}),e.jsxs("div",{className:"flex justify-center pt-5",children:[c===!1&&a!==null&&e.jsx("div",{className:"flex justify-center",children:e.jsx(C,{msgObj:s,isOwner:s.creatorId===a.uid,uid:a.uid,displayName:a.displayName,userObj:a,num:N,points:S})}),c===!1&&a===null&&e.jsx("div",{className:"flex justify-center",children:e.jsx(C,{msgObj:s,isOwner:!1,uid:null,displayName:null,userObj:a,num:N,points:S})}),c===!0&&e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{variant:"outlined",disabled:!0,children:"지워졌습니다"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{variant:"outlined",onClick:H,children:"뒤로 가기"})})]})]})]})]})}export{pe as default};
