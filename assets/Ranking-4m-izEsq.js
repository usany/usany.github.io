import{j as s,aO as p,O as y,aF as b,r,a5 as k,a6 as I,a0 as S,a2 as U,$ as C,aM as L,V as R,W as E,X as B,S as D}from"./index-B7KiBrOL.js";import{P as T}from"./PageTitle-B3vqCSym.js";import{d as $}from"./Comment-COC6QTgd.js";import{I as A}from"./IconButton-DzncC_mg.js";import{T as F}from"./TextField-whVoNHVS.js";function h({elements:f,multiple:e,userSearch:o}){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between w-screen",children:[s.jsxs("div",{className:"flex flex-col justify-center px-5",children:[e?"유저":"내"," 랭킹"]}),s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[s.jsxs("div",{children:[e?"유저":"내"," 이름"]}),s.jsx("div",{children:"포인트"})]}),s.jsx("div",{className:"flex flex-col justify-center px-5",children:"프로필"})]}),s.jsx("div",{className:"bg-light-3 dark:bg-dark-3",children:f.map((a,d)=>{let t=!0;if(o)for(let i=0;i<o.length;i++)(a==null?void 0:a.displayName[i])!==o[i]&&(t=!1);if(t)return s.jsxs("div",{children:[s.jsxs("div",{className:`flex justify-between w-screen p-3 ranking-${d+1}`,children:[s.jsxs("div",{className:"flex",children:[e?s.jsx("div",{className:"flex flex-col justify-center px-5 w-20",children:d+1}):s.jsx("div",{className:"flex flex-col justify-center px-5 w-20",children:a.rank}),(a==null?void 0:a.profileImageUrl)&&s.jsx(p,{alt:a.displayName,sx:{bgcolor:a.profileColor||"#2196f3"},src:(a==null?void 0:a.profileImageUrl)||"./src",variant:"rounded"}),!(a!=null&&a.profileImageUrl)&&s.jsx(p,{alt:a.displayName,sx:{bgcolor:a.profileColor||"#2196f3"},src:"./src",variant:"rounded"}),s.jsxs("div",{className:"flex flex-col overflow-hidden px-10 w-48",children:[s.jsx("div",{className:"overflow-hidden",children:a.displayName}),s.jsx("div",{className:"overflow-hidden",children:a.points})]})]}),s.jsx(A,{"aria-label":"comment",children:s.jsx(y,{to:"/profile",state:{element:a},children:s.jsx($,{})})})]}),s.jsx(b,{variant:"inset"})]},d)})})]})}function X({userObj:f}){const[e,o]=r.useState([]),[a,d]=r.useState([]),[t,i]=r.useState(""),[v,g]=r.useState([]),[O,m]=r.useState(null),N=k(),w=x=>{const{target:{value:l}}=x;i(l)};return r.useEffect(()=>{I(S(C(D,"members"),U("points","desc")),x=>{const l=x.docs.map((n,c)=>{var j;return R(E(B,`${(j=n.data())==null?void 0:j.uid}`)).then(u=>{g([...v,{url:u,index:c}])}).catch(u=>{console.log(u)}),{...n.data()}});o(l),l.map((n,c)=>{n.uid===f.uid&&(l[c].rank=c+1,d([l[c]]),m(c))})})},[]),r.useEffect(()=>{N(L(5))}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx(T,{title:"유저 랭킹"}),s.jsx("div",{className:"px-5 flex flex-col",children:s.jsx(F,{label:"유저 이름",onChange:w})}),t?s.jsx(h,{elements:e,multiple:!0,userSearch:t}):s.jsxs("div",{children:[s.jsx(h,{elements:a,multiple:!1,userSearch:null}),s.jsx(h,{elements:e,multiple:!0,userSearch:null})]})]})}export{X as default};
