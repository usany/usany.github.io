import{c as R,N as C,j as e,T as H,r as t,q as j,aH as y,U as A,F as v,f as E,g as x,h as L,k as B,V as F,L as q,a4 as M,w as Q}from"./index-BQyXn8pB.js";import{L as p}from"./Lists-CN1g6pyG.js";function I({changeUserSearch:a}){const o=R(l=>l.languages.value),s=l=>{const{target:{value:c}}=l;a(c)},{colorOne:i,colorTwo:r}=C();return e.jsx("div",{className:"px-5 flex justify-center",children:e.jsx(H,{sx:{width:"1000px",bgcolor:r,borderRadius:"5px"},label:o==="ko"?"유저 이름":"User name",onChange:s})})}function P({userObj:a,userSearch:o}){const[s,i]=t.useState([]),[r,l]=t.useState([]),[c,k]=t.useState(null),[u,m]=t.useState(!1);t.useState([]),t.useState(!1);const U=20;t.useEffect(()=>{const b=async()=>{const h=j(E(x,"members"),v("points","desc"),A(U),y(c||"")),d=await L(h),g=d.docs.map((n,f)=>{if(s.indexOf(n)===-1)return f+1===d.docs.length&&k(n),{...n.data()}});if(i([...s,...g]),r.length===0){const n=B(x,`members/${a.uid}`),N=(await F(n)).data();g.map((T,S)=>{T.uid===a.uid&&(g[S].rank=S+1)}),l([N])}m(!1)},D=async()=>{const h=j(E(x,"members"),v("points","desc"),y(c||"")),d=await L(h),g=d.docs.map((n,f)=>{if(console.log(s.indexOf(n)),s.indexOf(n)===-1)return f+1===d.docs.length&&k(n),{...n.data()}});i([...s,...g]),m(!1)};(u||s.length===0)&&b(),o&&(D(),console.log(o))},[u,o]);const w=()=>{if(document.documentElement.offsetHeight-(window.innerHeight+Math.round(document.documentElement.scrollTop))>10||u){console.log(document.documentElement.offsetHeight);return}else console.log("scroll"),m(!0)};return t.useEffect(()=>(window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)),[u]),e.jsx("div",{className:"flex justify-center w-screen",children:o?e.jsx("div",{children:e.jsx(p,{userObj:a,elements:s,multiple:!0,userSearch:o,ranking:!0,handleUser:null})}):e.jsxs("div",{className:"w-[1000px]",children:[e.jsx(p,{userObj:a,elements:r,multiple:!1,userSearch:null,ranking:!0,handleUser:null}),e.jsx(p,{userObj:a,elements:s,multiple:!0,userSearch:null,ranking:!0,handleUser:null}),u&&e.jsx("div",{className:"flex justify-center text-2xl bg-light-2 dark:bg-dark-2 rounded",children:"로딩"})]})})}function z({userObj:a}){const[o,s]=t.useState(""),i=R(l=>l.languages.value),r=q();return t.useEffect(()=>{r(M(5))}),e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:i==="ko"?"유저 랭킹":"User Ranking"}),e.jsx(I,{changeUserSearch:l=>s(l)}),e.jsx(P,{userObj:a,userSearch:o})]})}export{z as default};
