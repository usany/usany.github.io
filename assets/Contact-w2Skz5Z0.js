import{j as e,J as Q,r as t,c as k,q as S,f as y,g as p,W as B,X as V,Y as P,$ as W,D as q,B as N,k as J,aB as O,h as C,P as I,M,T,as as U,E,t as L,m as D,n as A,N as G,F as K,G as X,aI as Y,aJ as z,K as H,aE as Z,a5 as _,w as ee}from"./index-wZ20jrh3.js";import{L as $}from"./Lists-DCijbi9j.js";function F({action:s,label:i}){return e.jsxs("div",{className:"px-5",children:[e.jsxs("span",{children:[s,": "]}),e.jsx(Q,{label:i})]})}const se=({userObj:s})=>{const[i,d]=t.useState([]);t.useState();const c=k(a=>a.languages.value),o=S(y(p,"violations")),u=a=>{const n=a.id,m=J(p,`violations/${n}`);O(m);const r=[];i.map((l,g)=>{l.id!==n&&r.push(l),g+1===i.length&&d(r)}),alert("지웠습니다")};return t.useEffect(()=>{(async()=>{const n=[];(await C(o)).forEach(r=>{if(r.data().userUid===s.uid){const l=r.data(),g={id:r.id,...l};n.push(g)}d(n)})})()},[]),console.log(i),e.jsx("div",{className:"p-5",children:i.length!==0?i.map((a,n)=>e.jsx("div",{children:e.jsx(B,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(V,{value:n.toString(),children:[e.jsx(P,{children:a.messageTitle}),e.jsxs(W,{children:[e.jsx("div",{children:a.message}),a!=null&&a.violationUser?e.jsxs("div",{children:[e.jsx("div",{className:"pt-5",children:c==="ko"?"신고 등록 유저":"Report registered user"}),e.jsx($,{elements:[a.violationUser],multiple:!0,userSearch:!0,ranking:!1,handleUser:m=>console.log(m)})]}):e.jsx(q,{variant:"inset"}),e.jsx("div",{className:"flex pt-3 justify-center",children:e.jsx(N,{variant:"outlined",onClick:()=>u(a),children:c==="ko"?"지우기":"Delete"})})]})]})})})):e.jsx("div",{children:c==="ko"?"신고하기 내역이 없습니다.":"No report"})})},te={ko:"신고하기 내역",en:"Report list"},ae=({userObj:s})=>{const[i,d]=t.useState([]);t.useState();const c=k(a=>a.languages.value),o=c==="ko"||c==="en"?c:"ko",u=S(y(p,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await C(u)).forEach(r=>{if(r.data().userUid===s.uid){const l=r.data(),g={id:r.id,...l};n.push(g)}d(n)})})()},[]),console.log(i),e.jsx("div",{className:"flex justify-center pt-5",children:te[o]})},ne={ko:"신고하기 내역",en:"Report list"},ce=({userObj:s})=>{const[i,d]=t.useState([]);t.useState();const c=k(a=>a.languages.value),o=c==="ko"||c==="en"?c:"ko",u=S(y(p,"violations"));return t.useEffect(()=>{(async()=>{const n=[];(await C(u)).forEach(r=>{if(r.data().userUid===s.uid){const l=r.data(),g={id:r.id,...l};n.push(g)}d(n)})})()},[]),console.log(i),e.jsx(N,{variant:"outlined",form:"auth",children:ne[o]})},oe=({userObj:s})=>{const[i,d]=t.useState([]);t.useState(),k(o=>o.languages.value);const c=S(y(p,"violations"));return t.useEffect(()=>{(async()=>{const u=[];(await C(c)).forEach(n=>{if(n.data().userUid===s.uid){const m=n.data(),r={id:n.id,...m};u.push(r)}d(u)})})()},[]),e.jsx(e.Fragment,{children:e.jsx(I,{trigger:e.jsx(ce,{}),title:e.jsx(ae,{userObj:s}),content:e.jsx(se,{userObj:s})})})};function re({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]),[a,n]=t.useState(""),m=k(l=>l.languages.value),r=l=>{const{target:{value:g}}=l;n(g)};return t.useEffect(()=>{(async()=>{const g=S(y(p,"members"),E("points","desc")),f=(await C(g)).docs.map((j,v)=>{var w;return L(D(A,`${(w=j.data())==null?void 0:w.uid}`)).then(h=>{u([...o,{url:h,index:v}])}).catch(h=>{console.log(h)}),{...j.data()}});c(f)})()},[]),M(),e.jsxs("div",{className:`flex flex-col p-5 ${!a&&"h-[60vh]"}`,children:[e.jsx(T,{label:m==="ko"?"유저 이름":"User name",onChange:r}),a&&e.jsx("div",{className:"flex flex-col",children:e.jsx(U,{children:e.jsx($,{elements:d,multiple:!0,userSearch:a,ranking:!1,handleUser:l=>i(l)})})})]})}function ie({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]);return t.useState(""),k(a=>a.languages.value),t.useEffect(()=>{(async()=>{const n=S(y(p,"members"),E("points","desc")),r=(await C(n)).docs.map((l,g)=>{var x;return L(D(A,`${(x=l.data())==null?void 0:x.uid}`)).then(f=>{u([...o,{url:f,index:g}])}).catch(f=>{console.log(f)}),{...l.data()}});c(r)})()},[]),M(),e.jsx("div",{children:"유저 검색"})}function le({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]),[a,n]=t.useState(""),m=k(g=>g.languages.value);t.useEffect(()=>{(async()=>{const x=S(y(p,"members"),E("points","desc")),j=(await C(x)).docs.map((v,w)=>{var h;return L(D(A,`${(h=v.data())==null?void 0:h.uid}`)).then(b=>{u([...o,{url:b,index:w}])}).catch(b=>{console.log(b)}),{...v.data()}});c(j)})()},[]);const{color:r,colorTwo:l}=M();return e.jsx("div",{className:"w-full",onClick:()=>n(""),children:s?e.jsx(G,{sx:{width:"100%",bgcolor:r},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex flex-col justify-center",children:m==="ko"?"신고 유저:":"Reporting User"}),e.jsx("div",{className:"px-5",children:e.jsxs(K,{className:`bg-${((s==null?void 0:s.profileColor)||[]).indexOf("#")===-1?s==null?void 0:s.profileColor:"profile-blue"}`,children:[e.jsx(X,{src:s==null?void 0:s.profileImageUrl}),e.jsx(Y,{className:"text-xl border-none",children:s==null?void 0:s.displayName[0]})]})}),e.jsx("div",{className:"flex flex-col justify-center",children:s.displayName})]})}):e.jsx("div",{className:"flex justify-center w-screen",children:e.jsx(N,{sx:{width:"50%",bgcolor:l,":hover":{bgcolor:l}},variant:"outlined",form:"auth",children:m==="ko"?"신고 등록 유저":"Register reporting user"})})})}function de({violationUser:s,changeViolationUser:i}){const[d,c]=t.useState([]),[o,u]=t.useState([]);t.useState("");const a=k(n=>n.languages.value);return t.useEffect(()=>{(async()=>{const m=S(y(p,"members"),E("points","desc")),l=(await C(m)).docs.map((g,x)=>{var f;return L(D(A,`${(f=g.data())==null?void 0:f.uid}`)).then(j=>{u([...o,{url:j,index:x}])}).catch(j=>{console.log(j)}),{...g.data()}});c(l)})()},[]),M(),e.jsxs(e.Fragment,{children:[e.jsx(I,{trigger:e.jsx(le,{violationUser:s}),title:e.jsx(ie,{}),content:e.jsx(re,{changeViolationUser:i})}),s&&e.jsx(N,{sx:{width:"25%"},variant:"outlined",onClick:()=>i(null),children:a==="ko"?"신고 등록 취소":"Cancel reporting"})]})}const ue={ko:"신고하기 제목",en:"Report Title"},ge={ko:"신고하기 내용",en:"Report Content"};function me({userObj:s,user:i}){const[d,c]=t.useState(""),[o,u]=t.useState(""),[a,n]=t.useState(!1),[m,r]=t.useState(null),[l,g]=t.useState(!0),x=k(h=>h.languages.value),f=x==="ko"||x==="en"?x:"ko";t.useEffect(()=>{i&&l&&(r(i),g(!1))},[i]),t.useEffect(()=>{n(!!(d&&o))},[d,o]);const j=async()=>{try{await z(y(p,"violations"),{userUid:s.uid,userName:s.displayName,messageTitle:d,message:o,violationUser:m}),alert("등록되었습니다"),c(""),u("")}catch(h){console.log(h)}},v=h=>{const{target:{name:b,value:R}}=h;u(R)},w=h=>{const{target:{name:b,value:R}}=h;c(R)};return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"auth",children:[e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(T,{label:ue[f],multiline:!0,value:d,onChange:w,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex justify-center pt-5 px-5",children:e.jsx(T,{label:ge[f],multiline:!0,rows:5,value:o,onChange:v,variant:"outlined",fullWidth:!0})}),e.jsx("div",{className:"flex pt-3 px-5 gap-1",children:e.jsx(de,{violationUser:m,changeViolationUser:h=>r(h)})}),e.jsxs("div",{className:"flex justify-center pt-2.5",children:[e.jsx(oe,{userObj:s}),a?e.jsx(N,{variant:"outlined",form:"auth",onClick:j,children:x==="ko"?"전송":"send"}):e.jsx(N,{variant:"outlined",form:"auth",disabled:!0,children:x==="ko"?"전송":"send"})]})]})})}const he={ko:"신고하기",en:"Report"},xe={ko:"발신",en:"Sending"},fe={ko:"수신",en:"Receiving"},je={ko:"담당자",en:"supervisor"};function ye({userObj:s}){const i=H(),{state:d}=Z(),c=k(u=>u.languages.value),o=c==="ko"||c==="en"?c:"ko";return t.useEffect(()=>{i(_(5))}),e.jsxs("div",{children:[e.jsx(ee,{title:he[o]}),e.jsx(F,{action:xe[o],label:s.displayName}),e.jsx(F,{action:fe[o],label:je[o]}),e.jsx(me,{userObj:s,user:d==null?void 0:d.user})]})}export{ye as default};
